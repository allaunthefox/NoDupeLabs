<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Copy/Paste Detector Report</title><link href="styles/tailwind.css" rel="stylesheet"><link href="styles/prism.css" rel="stylesheet"></head><body class="bg-gray-100"><header class="bg-white shadow py-4"><div class="container mx-auto px-4"><h1 class="text-3xl font-semibold text-gray-800">jscpd - copy/paste report</h1></div></header><main class="container mx-auto my-8 p-4 bg-white shadow rounded"><section class="mb-8" id="dashboard"><h2 class="text-2xl font-semibold text-gray-700 mb-4">Dashboard</h2><div class="grid grid-cols-4 gap-4"><div class="bg-blue-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-blue-800 mb-2">Total Files</h3><span class="text-4xl font-bold text-blue-800">187</span></div><div class="bg-green-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-green-800 mb-2">Total Lines of Code</h3><span class="text-4xl font-bold text-green-800">54719</span></div><div class="bg-yellow-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-yellow-800 mb-2">Number of Clones</h3><span class="text-4xl font-bold text-yellow-800">145</span></div><div class="bg-red-200 p-4 rounded text-center"><h3 class="text-lg font-semibold text-red-800 mb-2">Duplicated Lines</h3><span class="text-4xl font-bold text-red-800">2446 (4.47%)</span></div></div></section><section class="mb-8" id="formats"><h2 class="text-2xl font-semibold text-gray-700 mb-4">Formats with Duplications</h2><table class="w-full table-auto"><thead><tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal"><th class="py-3 px-6 text-left">Format</th><th class="py-3 px-6 text-left">Files</th><th class="py-3 px-6 text-left">Lines</th><th class="py-3 px-6 text-left">Clones</th><th class="py-3 px-6 text-left">Duplicated Lines</th><th class="py-3 px-6 text-left">Duplicated Tokens</th></tr></thead><tbody><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#python-clones">python</a></td><td class="py-3 px-6">185</td><td class="py-3 px-6">54078</td><td class="py-3 px-6">145</td><td class="py-3 px-6">2446</td><td class="py-3 px-6">18938</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#ini-clones">ini</a></td><td class="py-3 px-6">1</td><td class="py-3 px-6">37</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td></tr><tr class="bg-white border-b border-gray-200 text-gray-800 text-sm"><td class="py-3 px-6"><a class="text-blue-600 hover:underline" href="#markdown-clones">markdown</a></td><td class="py-3 px-6">1</td><td class="py-3 px-6">604</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td><td class="py-3 px-6">0</td></tr></tbody></table></section><section class="mb-8" id="txt-clones"><a name="python-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">python</h2><div class="divide-y divide-gray-200 border-b-2"><div class="py-4"><p class="text-gray-600">nodupe/tools/video/__init__.py (Line 280:13 - Line 293:20), nodupe/tools/video/__init__.py (Line 177:13 - Line 190:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn0" onclick="toggleCodeBlock('cloneGroup0', 'expandBtn0', 'collapseBtn0')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn0" onclick="toggleCodeBlock('cloneGroup0', 'expandBtn0', 'collapseBtn0')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup0"><code class="language-python text-sm text-gray-800">avg = np.mean(resized)
            bits = ''.join(['1' if pixel &gt; avg else '0' for pixel in resized.flatten()])
            return hashlib.md5(bits.encode()).hexdigest()

        except Exception as e:
            logger.error(f&quot;Error computing perceptual hash: {e}&quot;)
            return &quot;&quot;

    def get_priority(self) -&gt; int:
        &quot;&quot;&quot;Get backend priority&quot;&quot;&quot;
        return self.priority


class VideoBackendManager</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/similarity/__init__.py (Line 496:5 - Line 507:14), nodupe/tools/video/video_plugin.py (Line 20:5 - Line 31:17)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn1" onclick="toggleCodeBlock('cloneGroup1', 'expandBtn1', 'collapseBtn1')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn1" onclick="toggleCodeBlock('cloneGroup1', 'expandBtn1', 'collapseBtn1')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup1"><code class="language-python text-sm text-gray-800">@property
    def version(self) -&gt; str:
        return &quot;1.0.0&quot;

    @property
    def dependencies(self) -&gt; List[str]:
        return []

    @property
    def api_methods(self) -&gt; Dict[str, Callable[..., Any]]:
        return {
            'add_vectors'</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/scanner_engine/processor.py (Line 243:2 - Line 252:2), nodupe/tools/scanner_engine/walker.py (Line 142:14 - Line 150:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn2" onclick="toggleCodeBlock('cloneGroup2', 'expandBtn2', 'collapseBtn2')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn2" onclick="toggleCodeBlock('cloneGroup2', 'expandBtn2', 'collapseBtn2')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup2"><code class="language-python text-sm text-gray-800">,
                'name': os.path.basename(file_path),
                'extension': os.path.splitext(file_path)[1].lower(),
                'size': stat.st_size,
                'modified_time': int(stat.st_mtime),
                'created_time': int(stat.st_ctime),
                'is_directory': False,
                'is_file': True,
                'is_symlink': os.path.islink(file_path)
            }</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/parallel/parallel_logic.py (Line 192:9 - Line 210:18), nodupe/tools/parallel/parallel_logic.py (Line 118:9 - Line 136:37)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn3" onclick="toggleCodeBlock('cloneGroup3', 'expandBtn3', 'collapseBtn3')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn3" onclick="toggleCodeBlock('cloneGroup3', 'expandBtn3', 'collapseBtn3')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup3"><code class="language-python text-sm text-gray-800">try:
            # Determine number of workers
            if workers is None:
                workers = Parallel.get_cpu_count() if use_processes else min(32, len(items))

            # Choose executor based on options
            if use_interpreters and Parallel.supports_interpreter_pool():
                try:
                    from concurrent.futures import InterpreterPoolExecutor
                    executor_class = InterpreterPoolExecutor
                except ImportError:
                    # Fallback to ThreadPoolExecutor if InterpreterPoolExecutor not available
                    executor_class = ThreadPoolExecutor
            elif use_processes:
                executor_class = ProcessPoolExecutor
            else:
                executor_class = ThreadPoolExecutor

            # Map in parallel</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/os_filesystem/filesystem.py (Line 287:9 - Line 302:12), nodupe/tools/os_filesystem/filesystem.py (Line 254:9 - Line 269:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn4" onclick="toggleCodeBlock('cloneGroup4', 'expandBtn4', 'collapseBtn4')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn4" onclick="toggleCodeBlock('cloneGroup4', 'expandBtn4', 'collapseBtn4')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup4"><code class="language-python text-sm text-gray-800">try:
            if isinstance(src, str):
                src = Path(src)
            if isinstance(dst, str):
                dst = Path(dst)

            if not src.exists():
                raise FilesystemError(f&quot;Source file does not exist: {src}&quot;)

            if dst.exists() and not overwrite:
                raise FilesystemError(f&quot;Destination file exists: {dst}&quot;)

            # Ensure destination directory exists
            dst.parent.mkdir(parents=True, exist_ok=True)

            # Move file</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/network/network_plugin.py (Line 20:5 - Line 31:14), nodupe/tools/video/video_plugin.py (Line 20:5 - Line 31:17)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn5" onclick="toggleCodeBlock('cloneGroup5', 'expandBtn5', 'collapseBtn5')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn5" onclick="toggleCodeBlock('cloneGroup5', 'expandBtn5', 'collapseBtn5')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup5"><code class="language-python text-sm text-gray-800">@property
    def version(self) -&gt; str:
        return &quot;1.0.0&quot;

    @property
    def dependencies(self) -&gt; List[str]:
        return []

    @property
    def api_methods(self) -&gt; Dict[str, Callable[..., Any]]:
        return {
            'upload_file'</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/ml/ml_plugin.py (Line 20:5 - Line 31:22), nodupe/tools/video/video_plugin.py (Line 20:5 - Line 31:17)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn6" onclick="toggleCodeBlock('cloneGroup6', 'expandBtn6', 'collapseBtn6')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn6" onclick="toggleCodeBlock('cloneGroup6', 'expandBtn6', 'collapseBtn6')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup6"><code class="language-python text-sm text-gray-800">@property
    def version(self) -&gt; str:
        return &quot;1.0.0&quot;

    @property
    def dependencies(self) -&gt; List[str]:
        return []

    @property
    def api_methods(self) -&gt; Dict[str, Callable[..., Any]]:
        return {
            'generate_embeddings'</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/mime/mime_tool.py (Line 20:5 - Line 31:19), nodupe/tools/video/video_plugin.py (Line 20:5 - Line 31:17)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn7" onclick="toggleCodeBlock('cloneGroup7', 'expandBtn7', 'collapseBtn7')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn7" onclick="toggleCodeBlock('cloneGroup7', 'expandBtn7', 'collapseBtn7')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup7"><code class="language-python text-sm text-gray-800">@property
    def version(self) -&gt; str:
        return &quot;1.0.0&quot;

    @property
    def dependencies(self) -&gt; List[str]:
        return []

    @property
    def api_methods(self) -&gt; Dict[str, Callable[..., Any]]:
        return {
            'detect_mime_type'</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/hashing/hash_cache.py (Line 148:9 - Line 173:9), nodupe/tools/ml/embedding_cache.py (Line 147:4 - Line 172:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn8" onclick="toggleCodeBlock('cloneGroup8', 'expandBtn8', 'collapseBtn8')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn8" onclick="toggleCodeBlock('cloneGroup8', 'expandBtn8', 'collapseBtn8')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup8"><code class="language-python text-sm text-gray-800">]
                return True
            return False

    def invalidate_all(self) -&gt; None:
        &quot;&quot;&quot;Invalidate all cache entries.&quot;&quot;&quot;
        with self._lock:
            # Count the number of entries being cleared
            num_entries = len(self._cache)
            self._cache.clear()
            # Increment evictions by the number of entries that were cleared
            self._stats['evictions'] += num_entries

    def validate_cache(self) -&gt; int:
        &quot;&quot;&quot;Validate all cache entries and remove stale ones.

        Returns:
            Number of entries removed
        &quot;&quot;&quot;
        with self._lock:
            removed_count = 0
            current_time = time.monotonic()

            # Collect keys to remove
            keys_to_remove = []
            for path_str</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/hashing/hash_cache.py (Line 191:9 - Line 222:10), nodupe/tools/ml/embedding_cache.py (Line 179:10 - Line 210:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn9" onclick="toggleCodeBlock('cloneGroup9', 'expandBtn9', 'collapseBtn9')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn9" onclick="toggleCodeBlock('cloneGroup9', 'expandBtn9', 'collapseBtn9')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup9"><code class="language-python text-sm text-gray-800">]
                removed_count += 1

            return removed_count

    def get_stats(self) -&gt; Dict[str, Any]:
        &quot;&quot;&quot;Get cache statistics.

        Returns:
            Dictionary of cache statistics
        &quot;&quot;&quot;
        with self._lock:
            stats = self._stats.copy()
            stats['size'] = len(self._cache)
            stats['capacity'] = self.max_size
            stats['hit_rate'] = (
                stats['hits'] / (stats['hits'] + stats['misses'])
                if (stats['hits'] + stats['misses']) &gt; 0
                else 0.0
            )
            return stats

    def get_cache_size(self) -&gt; int:
        &quot;&quot;&quot;Get current cache size.

        Returns:
            Number of entries in cache
        &quot;&quot;&quot;
        with self._lock:
            return len(self._cache)

    def is_cached(self, file_path</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/hashing/hash_cache.py (Line 231:10 - Line 262:68), nodupe/tools/ml/embedding_cache.py (Line 219:4 - Line 250:70)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn10" onclick="toggleCodeBlock('cloneGroup10', 'expandBtn10', 'collapseBtn10')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn10" onclick="toggleCodeBlock('cloneGroup10', 'expandBtn10', 'collapseBtn10')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup10"><code class="language-python text-sm text-gray-800">) is not None

    def cleanup_expired(self) -&gt; int:
        &quot;&quot;&quot;Remove expired entries from cache.

        Returns:
            Number of entries removed
        &quot;&quot;&quot;
        return self.validate_cache()

    def resize(self, new_max_size: int) -&gt; None:
        &quot;&quot;&quot;Resize cache and evict excess entries if necessary.

        Args:
            new_max_size: New maximum cache size
        &quot;&quot;&quot;
        with self._lock:
            self.max_size = new_max_size

            # Remove excess entries from the beginning (LRU)
            while len(self._cache) &gt; self.max_size:
                self._cache.popitem(last=False)
                self._stats['evictions'] += 1

    def get_memory_usage(self) -&gt; int:
        &quot;&quot;&quot;Get approximate memory usage of cache.

        Returns:
            Approximate memory usage in bytes
        &quot;&quot;&quot;
        with self._lock:
            # Rough estimate: path string + hash string + timestamps + overhead</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/gpu/gpu_plugin.py (Line 20:5 - Line 31:21), nodupe/tools/video/video_plugin.py (Line 20:5 - Line 31:17)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn11" onclick="toggleCodeBlock('cloneGroup11', 'expandBtn11', 'collapseBtn11')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn11" onclick="toggleCodeBlock('cloneGroup11', 'expandBtn11', 'collapseBtn11')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup11"><code class="language-python text-sm text-gray-800">@property
    def version(self) -&gt; str:
        return &quot;1.0.0&quot;

    @property
    def dependencies(self) -&gt; List[str]:
        return []

    @property
    def api_methods(self) -&gt; Dict[str, Callable[..., Any]]:
        return {
            'compute_embeddings'</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/gpu/__init__.py (Line 235:50 - Line 247:44), nodupe/tools/gpu/__init__.py (Line 153:49 - Line 165:43)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn12" onclick="toggleCodeBlock('cloneGroup12', 'expandBtn12', 'collapseBtn12')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn12" onclick="toggleCodeBlock('cloneGroup12', 'expandBtn12', 'collapseBtn12')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup12"><code class="language-python text-sm text-gray-800">)
            fallback = CPUFallbackBackend()
            return fallback.matrix_multiply(a, b)

        try:
            import torch

            a_tensor = torch.tensor(a, dtype=torch.float32).to(self.device)
            b_tensor = torch.tensor(b, dtype=torch.float32).to(self.device)
            result = torch.matmul(a_tensor, b_tensor)
            return result.cpu().numpy().tolist()
        except Exception as e:
            logger.error(f&quot;Error in Metal matrix multiplication: {e}&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/databases/query_cache.py (Line 183:10 - Line 214:6), nodupe/tools/ml/embedding_cache.py (Line 179:10 - Line 210:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn13" onclick="toggleCodeBlock('cloneGroup13', 'expandBtn13', 'collapseBtn13')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn13" onclick="toggleCodeBlock('cloneGroup13', 'expandBtn13', 'collapseBtn13')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup13"><code class="language-python text-sm text-gray-800">]
                removed_count += 1

            return removed_count

    def get_stats(self) -&gt; Dict[str, Any]:
        &quot;&quot;&quot;Get cache statistics.

        Returns:
            Dictionary of cache statistics
        &quot;&quot;&quot;
        with self._lock:
            stats = self._stats.copy()
            stats['size'] = len(self._cache)
            stats['capacity'] = self.max_size
            stats['hit_rate'] = (
                stats['hits'] / (stats['hits'] + stats['misses'])
                if (stats['hits'] + stats['misses']) &gt; 0
                else 0.0
            )
            return stats

    def get_cache_size(self) -&gt; int:
        &quot;&quot;&quot;Get current cache size.

        Returns:
            Number of entries in cache
        &quot;&quot;&quot;
        with self._lock:
            return len(self._cache)

    def is_cached(self, query</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/databases/query_cache.py (Line 224:7 - Line 255:67), nodupe/tools/ml/embedding_cache.py (Line 219:4 - Line 250:70)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn14" onclick="toggleCodeBlock('cloneGroup14', 'expandBtn14', 'collapseBtn14')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn14" onclick="toggleCodeBlock('cloneGroup14', 'expandBtn14', 'collapseBtn14')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup14"><code class="language-python text-sm text-gray-800">) is not None

    def cleanup_expired(self) -&gt; int:
        &quot;&quot;&quot;Remove expired entries from cache.

        Returns:
            Number of entries removed
        &quot;&quot;&quot;
        return self.validate_cache()

    def resize(self, new_max_size: int) -&gt; None:
        &quot;&quot;&quot;Resize cache and evict excess entries if necessary.

        Args:
            new_max_size: New maximum cache size
        &quot;&quot;&quot;
        with self._lock:
            self.max_size = new_max_size

            # Remove excess entries from the beginning (LRU)
            while len(self._cache) &gt; self.max_size:
                self._cache.popitem(last=False)
                self._stats['evictions'] += 1

    def get_memory_usage(self) -&gt; int:
        &quot;&quot;&quot;Get approximate memory usage of cache.

        Returns:
            Approximate memory usage in bytes
        &quot;&quot;&quot;
        with self._lock:
            # Rough estimate: query_key string + result + timestamp + overhead</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/databases/files.py (Line 114:10 - Line 129:42), nodupe/tools/databases/files.py (Line 84:8 - Line 99:34)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn15" onclick="toggleCodeBlock('cloneGroup15', 'expandBtn15', 'collapseBtn15')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn15" onclick="toggleCodeBlock('cloneGroup15', 'expandBtn15', 'collapseBtn15')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup15"><code class="language-python text-sm text-gray-800">,)
            )
            row = cursor.fetchone()
            if row:
                return {
                    'id': row[0],
                    'path': row[1],
                    'size': row[2],
                    'modified_time': row[3],
                    'hash': row[8],
                    'is_duplicate': bool(row[9]),
                    'duplicate_of': row[10]
                }
            return None
        except Exception as e:
            print(f&quot;[ERROR] Failed to get file by path: {e}&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/databases/files.py (Line 199:17 - Line 208:4), nodupe/tools/databases/files.py (Line 88:2 - Line 97:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn16" onclick="toggleCodeBlock('cloneGroup16', 'expandBtn16', 'collapseBtn16')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn16" onclick="toggleCodeBlock('cloneGroup16', 'expandBtn16', 'collapseBtn16')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup16"><code class="language-python text-sm text-gray-800">{
                    'id': row[0],
                    'path': row[1],
                    'size': row[2],
                    'modified_time': row[3],
                    'hash': row[8],
                    'is_duplicate': bool(row[9]),
                    'duplicate_of': row[10]
                }
                for</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/databases/files.py (Line 226:5 - Line 241:49), nodupe/tools/databases/files.py (Line 196:11 - Line 211:49)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn17" onclick="toggleCodeBlock('cloneGroup17', 'expandBtn17', 'collapseBtn17')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn17" onclick="toggleCodeBlock('cloneGroup17', 'expandBtn17', 'collapseBtn17')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup17"><code class="language-python text-sm text-gray-800">,)
            )
            return [
                {
                    'id': row[0],
                    'path': row[1],
                    'size': row[2],
                    'modified_time': row[3],
                    'hash': row[8],
                    'is_duplicate': bool(row[9]),
                    'duplicate_of': row[10]
                }
                for row in cursor.fetchall()
            ]
        except Exception as e:
            print(f&quot;[ERROR] Failed to find duplicates by size: {e}&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/databases/files.py (Line 251:36 - Line 265:39), nodupe/tools/databases/files.py (Line 197:13 - Line 211:49)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn18" onclick="toggleCodeBlock('cloneGroup18', 'expandBtn18', 'collapseBtn18')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn18" onclick="toggleCodeBlock('cloneGroup18', 'expandBtn18', 'collapseBtn18')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup18"><code class="language-python text-sm text-gray-800">)
            return [
                {
                    'id': row[0],
                    'path': row[1],
                    'size': row[2],
                    'modified_time': row[3],
                    'hash': row[8],
                    'is_duplicate': bool(row[9]),
                    'duplicate_of': row[10]
                }
                for row in cursor.fetchall()
            ]
        except Exception as e:
            print(f&quot;[ERROR] Failed to get all files: {e}&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/databases/files.py (Line 296:13 - Line 310:45), nodupe/tools/databases/files.py (Line 197:13 - Line 211:49)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn19" onclick="toggleCodeBlock('cloneGroup19', 'expandBtn19', 'collapseBtn19')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn19" onclick="toggleCodeBlock('cloneGroup19', 'expandBtn19', 'collapseBtn19')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup19"><code class="language-python text-sm text-gray-800">)
            return [
                {
                    'id': row[0],
                    'path': row[1],
                    'size': row[2],
                    'modified_time': row[3],
                    'hash': row[8],
                    'is_duplicate': bool(row[9]),
                    'duplicate_of': row[10]
                }
                for row in cursor.fetchall()
            ]
        except Exception as e:
            print(f&quot;[ERROR] Failed to get duplicate files: {e}&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/databases/files.py (Line 322:13 - Line 336:44), nodupe/tools/databases/files.py (Line 197:13 - Line 211:49)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn20" onclick="toggleCodeBlock('cloneGroup20', 'expandBtn20', 'collapseBtn20')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn20" onclick="toggleCodeBlock('cloneGroup20', 'expandBtn20', 'collapseBtn20')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup20"><code class="language-python text-sm text-gray-800">)
            return [
                {
                    'id': row[0],
                    'path': row[1],
                    'size': row[2],
                    'modified_time': row[3],
                    'hash': row[8],
                    'is_duplicate': bool(row[9]),
                    'duplicate_of': row[10]
                }
                for row in cursor.fetchall()
            ]
        except Exception as e:
            print(f&quot;[ERROR] Failed to get original files: {e}&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/databases/embeddings.py (Line 112:14 - Line 125:47), nodupe/tools/databases/embeddings.py (Line 83:2 - Line 96:39)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn21" onclick="toggleCodeBlock('cloneGroup21', 'expandBtn21', 'collapseBtn21')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn21" onclick="toggleCodeBlock('cloneGroup21', 'expandBtn21', 'collapseBtn21')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup21"><code class="language-python text-sm text-gray-800">)
            )
            row = cursor.fetchone()
            if row:
                return {
                    'id': row[0],
                    'file_id': row[1],
                    'embedding': pickle.loads(row[2]),
                    'model_version': row[3],
                    'created_time': row[4]
                }
            return None
        except Exception as e:
            print(f&quot;[ERROR] Failed to get embedding by file: {e}&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/databases/embeddings.py (Line 168:14 - Line 181:49), nodupe/tools/databases/embeddings.py (Line 140:8 - Line 153:48)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn22" onclick="toggleCodeBlock('cloneGroup22', 'expandBtn22', 'collapseBtn22')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn22" onclick="toggleCodeBlock('cloneGroup22', 'expandBtn22', 'collapseBtn22')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup22"><code class="language-python text-sm text-gray-800">,)
            )
            return [
                {
                    'id': row[0],
                    'file_id': row[1],
                    'embedding': pickle.loads(row[2]),
                    'model_version': row[3],
                    'created_time': row[4]
                }
                for row in cursor.fetchall()
            ]
        except Exception as e:
            print(f&quot;[ERROR] Failed to get embeddings by model: {e}&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/databases/embeddings.py (Line 271:59 - Line 283:44), nodupe/tools/databases/embeddings.py (Line 141:13 - Line 153:48)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn23" onclick="toggleCodeBlock('cloneGroup23', 'expandBtn23', 'collapseBtn23')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn23" onclick="toggleCodeBlock('cloneGroup23', 'expandBtn23', 'collapseBtn23')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup23"><code class="language-python text-sm text-gray-800">)
            return [
                {
                    'id': row[0],
                    'file_id': row[1],
                    'embedding': pickle.loads(row[2]),
                    'model_version': row[3],
                    'created_time': row[4]
                }
                for row in cursor.fetchall()
            ]
        except Exception as e:
            print(f&quot;[ERROR] Failed to get all embeddings: {e}&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/databases/database_tool.py (Line 20:5 - Line 35:74), nodupe/tools/parallel/parallel_tool.py (Line 21:5 - Line 36:82)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn24" onclick="toggleCodeBlock('cloneGroup24', 'expandBtn24', 'collapseBtn24')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn24" onclick="toggleCodeBlock('cloneGroup24', 'expandBtn24', 'collapseBtn24')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup24"><code class="language-python text-sm text-gray-800">@property
    def version(self) -&gt; str:
        return &quot;1.0.0&quot;

    @property
    def dependencies(self) -&gt; List[str]:
        return []

    @property
    def metadata(self) -&gt; ToolMetadata:
        &quot;&quot;&quot;Get tool metadata (ISO 19770-2 compliant).&quot;&quot;&quot;
        return ToolMetadata(
            name=self.name,
            version=self.version,
            software_id=f&quot;org.nodupe.tool.{self.name.lower()}&quot;,
            description=&quot;SQLite-based permanent storage for file metadata and duplicate records.&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/database/features.py (Line 1:1 - Line 107:2), nodupe/tools/database/sharding.py (Line 1:1 - Line 107:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn25" onclick="toggleCodeBlock('cloneGroup25', 'expandBtn25', 'collapseBtn25')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn25" onclick="toggleCodeBlock('cloneGroup25', 'expandBtn25', 'collapseBtn25')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup25"><code class="language-python text-sm text-gray-800">&quot;&quot;&quot;
Database Sharding Tool

Provides database sharding functionality for horizontal data partitioning.
&quot;&quot;&quot;

import sqlite3
import os
from typing import List, Optional, Dict, Any
import logging

from nodupe.core.tool_system import Tool, ToolMetadata


logger = logging.getLogger(__name__)


class DatabaseShardingTool(Tool):
    &quot;&quot;&quot;
    Database sharding functionality tool.
    &quot;&quot;&quot;

    def __init__(self, config: Optional[Dict[str, Any]] = None):
        &quot;&quot;&quot;TODO: Document __init__.&quot;&quot;&quot;
        super().__init__()
        self.config = config or {}
        self._shards = {}
        logger.info(&quot;Database sharding tool initialized&quot;)

    @property
    def name(self) -&gt; str:
        &quot;&quot;&quot;TODO: Document name.&quot;&quot;&quot;
        return &quot;DatabaseSharding&quot;

    @property
    def version(self) -&gt; str:
        &quot;&quot;&quot;TODO: Document version.&quot;&quot;&quot;
        return &quot;1.0.0&quot;

    @property
    def dependencies(self) -&gt; List[str]:
        &quot;&quot;&quot;TODO: Document dependencies.&quot;&quot;&quot;
        return []

    def get_capabilities(self) -&gt; dict:
        &quot;&quot;&quot;TODO: Document get_capabilities.&quot;&quot;&quot;
        return {
            &quot;sharding&quot;: True,
            &quot;horizontal_partitioning&quot;: True,
            &quot;create_shard&quot;: True,
        }

    @property
    def metadata(self) -&gt; ToolMetadata:
        &quot;&quot;&quot;TODO: Document metadata.&quot;&quot;&quot;
        return ToolMetadata(
            name=self.name,
            version=self.version,
            description=&quot;Database sharding functionality for horizontal data partitioning&quot;,
            author=&quot;NoDupeLabs&quot;,
            license=&quot;Apache-2.0&quot;,
            dependencies=self.dependencies,
            tags=[&quot;database&quot;, &quot;sharding&quot;, &quot;partitioning&quot;]
        )

    def create_shard(self, shard_name: str, db_path: str = None) -&gt; str:
        &quot;&quot;&quot;TODO: Document create_shard.&quot;&quot;&quot;
        if not self._is_valid_identifier(shard_name):
            raise ValueError(f&quot;Invalid shard name: {shard_name}&quot;)

        if db_path is None:
            db_path = os.path.join(os.path.dirname(self.config.get('db_path', '.')), f&quot;{shard_name}.db&quot;)

        shard_conn = sqlite3.connect(db_path)
        try:
            shard_conn.execute(&quot;&quot;&quot;
                CREATE TABLE IF NOT EXISTS shard_data (
                    id INTEGER PRIMARY KEY,
                    key TEXT UNIQUE,
                    value BLOB,
                    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
                )
            &quot;&quot;&quot;)
            shard_conn.commit()
        finally:
            shard_conn.close()

        self._shards[shard_name] = db_path
        logger.info(f&quot;Created shard '{shard_name}' at {db_path}&quot;)
        return db_path

    def _is_valid_identifier(self, name: str) -&gt; bool:
        &quot;&quot;&quot;TODO: Document _is_valid_identifier.&quot;&quot;&quot;
        return bool(name and name.replace('_', '').replace('-', '').isalnum()
                   and not name.startswith('_') and len(name) &lt;= 64)

    def list_shards(self) -&gt; List[str]:
        &quot;&quot;&quot;TODO: Document list_shards.&quot;&quot;&quot;
        return list(self._shards.keys())

    def initialize(self, container: Any) -&gt; None:
        &quot;&quot;&quot;TODO: Document initialize.&quot;&quot;&quot;
        logger.info(&quot;Database sharding tool initialized&quot;)

    def shutdown(self, container: Any) -&gt; None:
        &quot;&quot;&quot;TODO: Document shutdown.&quot;&quot;&quot;
        logger.info(&quot;Database sharding tool shutdown&quot;)</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/tools/archive/archive_tool.py (Line 21:5 - Line 32:18), nodupe/tools/video/video_plugin.py (Line 20:5 - Line 31:17)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn26" onclick="toggleCodeBlock('cloneGroup26', 'expandBtn26', 'collapseBtn26')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn26" onclick="toggleCodeBlock('cloneGroup26', 'expandBtn26', 'collapseBtn26')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup26"><code class="language-python text-sm text-gray-800">@property
    def version(self) -&gt; str:
        return &quot;1.0.0&quot;

    @property
    def dependencies(self) -&gt; List[str]:
        return []

    @property
    def api_methods(self) -&gt; Dict[str, Callable[..., Any]]:
        return {
            'extract_archive'</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/core/api/validation.py (Line 82:5 - Line 87:10), nodupe/core/api/validation.py (Line 72:5 - Line 77:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn27" onclick="toggleCodeBlock('cloneGroup27', 'expandBtn27', 'collapseBtn27')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn27" onclick="toggleCodeBlock('cloneGroup27', 'expandBtn27', 'collapseBtn27')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup27"><code class="language-python text-sm text-gray-800">def decorator(func: Callable[..., Any]) -&gt; Callable[..., Any]:
        @functools.wraps(func)
        def wrapper(*args: Any, **kwargs: Any) -&gt; Any:
            return func(*args, **kwargs)
        return wrapper
    return decorator</code></pre></div><div class="py-4"><p class="text-gray-600">nodupe/core/api/decorators.py (Line 17:5 - Line 25:5), nodupe/core/api/validation.py (Line 72:5 - Line 80:18)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn28" onclick="toggleCodeBlock('cloneGroup28', 'expandBtn28', 'collapseBtn28')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn28" onclick="toggleCodeBlock('cloneGroup28', 'expandBtn28', 'collapseBtn28')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup28"><code class="language-python text-sm text-gray-800">def decorator(func: Callable[..., Any]) -&gt; Callable[..., Any]:
        @functools.wraps(func)
        def wrapper(*args: Any, **kwargs: Any) -&gt; Any:
            return func(*args, **kwargs)
        return wrapper
    return decorator


def cors</code></pre></div><div class="py-4"><p class="text-gray-600">tests/utils/validation.py (Line 127:17 - Line 142:2), tests/utils/validation.py (Line 92:17 - Line 106:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn29" onclick="toggleCodeBlock('cloneGroup29', 'expandBtn29', 'collapseBtn29')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn29" onclick="toggleCodeBlock('cloneGroup29', 'expandBtn29', 'collapseBtn29')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup29"><code class="language-python text-sm text-gray-800">}
            },
            &quot;schema&quot;: {
                &quot;type&quot;: &quot;dict&quot;,
                &quot;properties&quot;: {
                    &quot;database&quot;: {
                        &quot;type&quot;: &quot;dict&quot;,
                        &quot;required&quot;: [&quot;host&quot;, &quot;port&quot;, &quot;username&quot;, &quot;PASSWORD_REMOVED&quot;],
                        &quot;properties&quot;: {
                            &quot;host&quot;: {&quot;type&quot;: &quot;str&quot;},
                            &quot;port&quot;: {&quot;type&quot;: &quot;int&quot;, &quot;min&quot;: 1, &quot;max&quot;: 65535},
                            &quot;username&quot;: {&quot;type&quot;: &quot;str&quot;},
                            &quot;PASSWORD_REMOVED&quot;: {&quot;type&quot;: &quot;str&quot;}
                        }
                    }
                }</code></pre></div><div class="py-4"><p class="text-gray-600">tests/utils/validation.py (Line 285:16 - Line 311:6), tests/utils/validation.py (Line 246:16 - Line 272:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn30" onclick="toggleCodeBlock('cloneGroup30', 'expandBtn30', 'collapseBtn30')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn30" onclick="toggleCodeBlock('cloneGroup30', 'expandBtn30', 'collapseBtn30')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup30"><code class="language-python text-sm text-gray-800">,
            &quot;schema&quot;: {
                &quot;type&quot;: &quot;dict&quot;,
                &quot;required&quot;: [&quot;status&quot;, &quot;data&quot;, &quot;timestamp&quot;],
                &quot;properties&quot;: {
                    &quot;status&quot;: {&quot;type&quot;: &quot;str&quot;, &quot;pattern&quot;: &quot;^(success|error|warning)$&quot;},
                    &quot;data&quot;: {
                        &quot;type&quot;: &quot;dict&quot;,
                        &quot;required&quot;: [&quot;users&quot;],
                        &quot;properties&quot;: {
                            &quot;users&quot;: {
                                &quot;type&quot;: &quot;list&quot;,
                                &quot;items&quot;: {
                                    &quot;type&quot;: &quot;dict&quot;,
                                    &quot;required&quot;: [&quot;id&quot;, &quot;name&quot;],
                                    &quot;properties&quot;: {
                                        &quot;id&quot;: {&quot;type&quot;: &quot;int&quot;, &quot;min&quot;: 1},
                                        &quot;name&quot;: {&quot;type&quot;: &quot;str&quot;}
                                    }
                                }
                            }
                        }
                    },
                    &quot;timestamp&quot;: {&quot;type&quot;: &quot;str&quot;, &quot;pattern&quot;: &quot;^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$&quot;}
                }
            },
            &quot;expected_result&quot;: False</code></pre></div><div class="py-4"><p class="text-gray-600">tests/utils/validation.py (Line 386:18 - Line 403:18), tests/utils/validation.py (Line 369:18 - Line 386:18)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn31" onclick="toggleCodeBlock('cloneGroup31', 'expandBtn31', 'collapseBtn31')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn31" onclick="toggleCodeBlock('cloneGroup31', 'expandBtn31', 'collapseBtn31')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup31"><code class="language-python text-sm text-gray-800">: {
                &quot;users&quot;: {
                    &quot;columns&quot;: {
                        &quot;id&quot;: {&quot;type&quot;: &quot;INTEGER&quot;, &quot;constraints&quot;: [&quot;PRIMARY KEY&quot;]},
                        &quot;name&quot;: {&quot;type&quot;: &quot;TEXT&quot;, &quot;constraints&quot;: [&quot;NOT NULL&quot;]},
                        &quot;email&quot;: {&quot;type&quot;: &quot;TEXT&quot;, &quot;constraints&quot;: [&quot;UNIQUE&quot;]}
                    }
                },
                &quot;posts&quot;: {
                    &quot;columns&quot;: {
                        &quot;id&quot;: {&quot;type&quot;: &quot;INTEGER&quot;, &quot;constraints&quot;: [&quot;PRIMARY KEY&quot;]},
                        &quot;user_id&quot;: {&quot;type&quot;: &quot;INTEGER&quot;, &quot;constraints&quot;: [&quot;FOREIGN KEY&quot;]},
                        &quot;title&quot;: {&quot;type&quot;: &quot;TEXT&quot;},
                        &quot;content&quot;: {&quot;type&quot;: &quot;TEXT&quot;}
                    }
                }
            },
            &quot;expected_result&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">tests/utils/validation.py (Line 413:21 - Line 424:2), tests/utils/validation.py (Line 383:21 - Line 376:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn32" onclick="toggleCodeBlock('cloneGroup32', 'expandBtn32', 'collapseBtn32')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn32" onclick="toggleCodeBlock('cloneGroup32', 'expandBtn32', 'collapseBtn32')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup32"><code class="language-python text-sm text-gray-800">}
                }
            },
            &quot;expected_schema&quot;: {
                &quot;users&quot;: {
                    &quot;columns&quot;: {
                        &quot;id&quot;: {&quot;type&quot;: &quot;INTEGER&quot;, &quot;constraints&quot;: [&quot;PRIMARY KEY&quot;]},
                        &quot;name&quot;: {&quot;type&quot;: &quot;TEXT&quot;, &quot;constraints&quot;: [&quot;NOT NULL&quot;]},
                        &quot;email&quot;: {&quot;type&quot;: &quot;TEXT&quot;, &quot;constraints&quot;: [&quot;UNIQUE&quot;]}
                    }
                }
            }</code></pre></div><div class="py-4"><p class="text-gray-600">tests/utils/validation.py (Line 630:13 - Line 652:2), tests/utils/validation.py (Line 582:13 - Line 603:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn33" onclick="toggleCodeBlock('cloneGroup33', 'expandBtn33', 'collapseBtn33')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn33" onclick="toggleCodeBlock('cloneGroup33', 'expandBtn33', 'collapseBtn33')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup33"><code class="language-python text-sm text-gray-800">},
            &quot;expected_schema&quot;: {
                &quot;type&quot;: &quot;dict&quot;,
                &quot;required&quot;: [&quot;status&quot;, &quot;code&quot;, &quot;data&quot;, &quot;timestamp&quot;],
                &quot;properties&quot;: {
                    &quot;status&quot;: {&quot;type&quot;: &quot;str&quot;, &quot;pattern&quot;: &quot;^(success|error|warning)$&quot;},
                    &quot;code&quot;: {&quot;type&quot;: &quot;int&quot;, &quot;min&quot;: 200, &quot;max&quot;: 599},
                    &quot;data&quot;: {
                        &quot;type&quot;: &quot;dict&quot;,
                        &quot;required&quot;: [&quot;items&quot;, &quot;pagination&quot;],
                        &quot;properties&quot;: {
                            &quot;items&quot;: {
                                &quot;type&quot;: &quot;list&quot;,
                                &quot;items&quot;: {
                                    &quot;type&quot;: &quot;dict&quot;,
                                    &quot;required&quot;: [&quot;id&quot;, &quot;name&quot;],
                                    &quot;properties&quot;: {
                                        &quot;id&quot;: {&quot;type&quot;: &quot;int&quot;, &quot;min&quot;: 1},
                                        &quot;name&quot;: {&quot;type&quot;: &quot;str&quot;}
                                    }
                                }
                            }
                        }</code></pre></div><div class="py-4"><p class="text-gray-600">tests/utils/validation.py (Line 729:21 - Line 744:13), tests/utils/validation.py (Line 94:9 - Line 109:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn34" onclick="toggleCodeBlock('cloneGroup34', 'expandBtn34', 'collapseBtn34')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn34" onclick="toggleCodeBlock('cloneGroup34', 'expandBtn34', 'collapseBtn34')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup34"><code class="language-python text-sm text-gray-800">: {
                &quot;type&quot;: &quot;dict&quot;,
                &quot;properties&quot;: {
                    &quot;database&quot;: {
                        &quot;type&quot;: &quot;dict&quot;,
                        &quot;required&quot;: [&quot;host&quot;, &quot;port&quot;, &quot;username&quot;, &quot;PASSWORD_REMOVED&quot;],
                        &quot;properties&quot;: {
                            &quot;host&quot;: {&quot;type&quot;: &quot;str&quot;},
                            &quot;port&quot;: {&quot;type&quot;: &quot;int&quot;, &quot;min&quot;: 1, &quot;max&quot;: 65535},
                            &quot;username&quot;: {&quot;type&quot;: &quot;str&quot;},
                            &quot;PASSWORD_REMOVED&quot;: {&quot;type&quot;: &quot;str&quot;}
                        }
                    },
                    &quot;logging&quot;: {
                        &quot;type&quot;: &quot;dict&quot;,
                        &quot;properties&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">tests/utils/validation.py (Line 770:17 - Line 787:2), tests/utils/validation.py (Line 727:17 - Line 143:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn35" onclick="toggleCodeBlock('cloneGroup35', 'expandBtn35', 'collapseBtn35')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn35" onclick="toggleCodeBlock('cloneGroup35', 'expandBtn35', 'collapseBtn35')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup35"><code class="language-python text-sm text-gray-800">}
            ],
            &quot;expected_structure&quot;: {
                &quot;type&quot;: &quot;dict&quot;,
                &quot;properties&quot;: {
                    &quot;database&quot;: {
                        &quot;type&quot;: &quot;dict&quot;,
                        &quot;required&quot;: [&quot;host&quot;, &quot;port&quot;, &quot;username&quot;, &quot;PASSWORD_REMOVED&quot;],
                        &quot;properties&quot;: {
                            &quot;host&quot;: {&quot;type&quot;: &quot;str&quot;},
                            &quot;port&quot;: {&quot;type&quot;: &quot;int&quot;, &quot;min&quot;: 1, &quot;max&quot;: 65535},
                            &quot;username&quot;: {&quot;type&quot;: &quot;str&quot;},
                            &quot;PASSWORD_REMOVED&quot;: {&quot;type&quot;: &quot;str&quot;}
                        }
                    }
                }
            }
        }</code></pre></div><div class="py-4"><p class="text-gray-600">tests/utils/validation.py (Line 897:17 - Line 906:6), tests/utils/validation.py (Line 877:17 - Line 886:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn36" onclick="toggleCodeBlock('cloneGroup36', 'expandBtn36', 'collapseBtn36')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn36" onclick="toggleCodeBlock('cloneGroup36', 'expandBtn36', 'collapseBtn36')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup36"><code class="language-python text-sm text-gray-800">}
            },
            &quot;validation_rules&quot;: [
                {&quot;field&quot;: &quot;id&quot;, &quot;type&quot;: &quot;range&quot;, &quot;min&quot;: 1, &quot;max&quot;: 1000, &quot;required&quot;: True},
                {&quot;field&quot;: &quot;username&quot;, &quot;type&quot;: &quot;pattern&quot;, &quot;pattern&quot;: &quot;^[a-z_]+$&quot;, &quot;required&quot;: True},
                {&quot;field&quot;: &quot;email&quot;, &quot;type&quot;: &quot;pattern&quot;, &quot;pattern&quot;: &quot;^[^@]+@[^@]+\\.[^@]+$&quot;, &quot;required&quot;: True},
                {&quot;field&quot;: &quot;status&quot;, &quot;type&quot;: &quot;enum&quot;, &quot;values&quot;: [&quot;active&quot;, &quot;inactive&quot;, &quot;suspended&quot;], &quot;required&quot;: True},
                {&quot;field&quot;: &quot;age&quot;, &quot;type&quot;: &quot;range&quot;, &quot;min&quot;: 18, &quot;max&quot;: 120}
            ],
            &quot;expected_result&quot;: False</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_time_sync.py (Line 245:9 - Line 258:11), tests/plugins/test_time_sync.py (Line 181:9 - Line 194:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn37" onclick="toggleCodeBlock('cloneGroup37', 'expandBtn37', 'collapseBtn37')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn37" onclick="toggleCodeBlock('cloneGroup37', 'expandBtn37', 'collapseBtn37')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup37"><code class="language-python text-sm text-gray-800"># Mock DNS resolution
        mock_getaddrinfo.return_value = [
            (socket.AF_INET, socket.SOCK_DGRAM, 17, '', ('1.1.1.1', 123))
        ]

        # Mock NTP response
        server_time = 1600000000.5
        offset = 0.25
        delay = 0.01
        mock_query_address.return_value = (server_time, offset, delay)

        tool = TimeSyncTool(servers=[&quot;test.ntp.com&quot;], enabled=True, allow_network=True)

        result = tool.maybe_sync</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_time_sync.py (Line 339:9 - Line 351:5), tests/plugins/test_time_sync.py (Line 181:9 - Line 194:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn38" onclick="toggleCodeBlock('cloneGroup38', 'expandBtn38', 'collapseBtn38')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn38" onclick="toggleCodeBlock('cloneGroup38', 'expandBtn38', 'collapseBtn38')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup38"><code class="language-python text-sm text-gray-800"># Mock DNS resolution
        mock_getaddrinfo.return_value = [
            (socket.AF_INET, socket.SOCK_DGRAM, 17, '', ('1.1.1.1', 123))
        ]

        # Mock NTP response
        server_time = 1600000000.5
        offset = 0.25
        delay = 0.01
        mock_query_address.return_value = (server_time, offset, delay)

        tool = TimeSyncTool(servers=[&quot;test.ntp.com&quot;], enabled=True, allow_network=True)
        tool</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_time_sync.py (Line 460:9 - Line 469:7), tests/plugins/test_time_sync.py (Line 443:9 - Line 452:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn39" onclick="toggleCodeBlock('cloneGroup39', 'expandBtn39', 'collapseBtn39')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn39" onclick="toggleCodeBlock('cloneGroup39', 'expandBtn39', 'collapseBtn39')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup39"><code class="language-python text-sm text-gray-800">tool = TimeSyncTool(enabled=True)

        # Mock sync_with_fallback to return a known time
        with patch.object(tool, 'sync_with_fallback') as mock_sync, \
             patch.object(tool, 'get_corrected_time') as mock_get_time:

            mock_sync.return_value = (&quot;ntp&quot;, 1600000000.0, 0.0, 0.01)
            mock_get_time.return_value = 1600000000.123456

            result = tool.get_authenticated_time(format</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_time_sync.py (Line 477:9 - Line 486:10), tests/plugins/test_time_sync.py (Line 443:9 - Line 469:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn40" onclick="toggleCodeBlock('cloneGroup40', 'expandBtn40', 'collapseBtn40')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn40" onclick="toggleCodeBlock('cloneGroup40', 'expandBtn40', 'collapseBtn40')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup40"><code class="language-python text-sm text-gray-800">tool = TimeSyncTool(enabled=True)

        # Mock sync_with_fallback to return a known time
        with patch.object(tool, 'sync_with_fallback') as mock_sync, \
             patch.object(tool, 'get_corrected_time') as mock_get_time:

            mock_sync.return_value = (&quot;ntp&quot;, 1600000000.0, 0.0, 0.01)
            mock_get_time.return_value = 1600000000.123456

            result = tool.get_authenticated_time(format=&quot;rfc3339&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_time_sync.py (Line 493:9 - Line 502:8), tests/plugins/test_time_sync.py (Line 443:9 - Line 469:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn41" onclick="toggleCodeBlock('cloneGroup41', 'expandBtn41', 'collapseBtn41')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn41" onclick="toggleCodeBlock('cloneGroup41', 'expandBtn41', 'collapseBtn41')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup41"><code class="language-python text-sm text-gray-800">tool = TimeSyncTool(enabled=True)

        # Mock sync_with_fallback to return a known time
        with patch.object(tool, 'sync_with_fallback') as mock_sync, \
             patch.object(tool, 'get_corrected_time') as mock_get_time:

            mock_sync.return_value = (&quot;ntp&quot;, 1600000000.0, 0.0, 0.01)
            mock_get_time.return_value = 1600000000.123456

            result = tool.get_authenticated_time(format=&quot;human&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_time_sync.py (Line 595:9 - Line 606:36), tests/plugins/test_time_sync.py (Line 443:9 - Line 454:32)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn42" onclick="toggleCodeBlock('cloneGroup42', 'expandBtn42', 'collapseBtn42')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn42" onclick="toggleCodeBlock('cloneGroup42', 'expandBtn42', 'collapseBtn42')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup42"><code class="language-python text-sm text-gray-800">tool = TimeSyncTool(enabled=True)

        # Mock sync_with_fallback to return a known time
        with patch.object(tool, 'sync_with_fallback') as mock_sync, \
             patch.object(tool, 'get_corrected_time') as mock_get_time:

            mock_sync.return_value = (&quot;ntp&quot;, 1600000000.0, 0.0, 0.01)
            mock_get_time.return_value = 1600000000.123456

            result = tool.get_authenticated_time()

            # Should end with Z (UTC indicator)</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_time_sync.py (Line 637:9 - Line 646:33), tests/plugins/test_time_sync.py (Line 443:9 - Line 452:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn43" onclick="toggleCodeBlock('cloneGroup43', 'expandBtn43', 'collapseBtn43')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn43" onclick="toggleCodeBlock('cloneGroup43', 'expandBtn43', 'collapseBtn43')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup43"><code class="language-python text-sm text-gray-800">tool = TimeSyncTool(enabled=True)

        # Mock sync_with_fallback to return a known time
        with patch.object(tool, 'sync_with_fallback') as mock_sync, \
             patch.object(tool, 'get_corrected_time') as mock_get_time:

            mock_sync.return_value = (&quot;ntp&quot;, 1600000000.0, 0.0, 0.01)
            mock_get_time.return_value = 1600000000.123456

            # Test various case combinations</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_loader.py (Line 134:9 - Line 157:12), tests/plugins/test_plugin_loader.py (Line 68:9 - Line 91:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn44" onclick="toggleCodeBlock('cloneGroup44', 'expandBtn44', 'collapseBtn44')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn44" onclick="toggleCodeBlock('cloneGroup44', 'expandBtn44', 'collapseBtn44')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup44"><code class="language-python text-sm text-gray-800">registry = ToolRegistry()
        loader = ToolLoader(registry)

        # Create a test tool
        class TestTool(Tool):
            def __init__(self):
                self.name = &quot;test_tool&quot;
                self.version = &quot;1.0.0&quot;
                self.dependencies = []
                self.initialized = False
                self.shutdown_called = False

            def initialize(self, container):
                self.initialized = True

            def shutdown(self):
                self.shutdown_called = True

            def get_capabilities(self):
                return {&quot;test&quot;: True}

        test_tool = TestTool()

        # Load tool</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_loader.py (Line 215:21 - Line 228:2), tests/plugins/test_plugin_loader.py (Line 174:17 - Line 187:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn45" onclick="toggleCodeBlock('cloneGroup45', 'expandBtn45', 'collapseBtn45')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn45" onclick="toggleCodeBlock('cloneGroup45', 'expandBtn45', 'collapseBtn45')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup45"><code class="language-python text-sm text-gray-800">self.version = &quot;1.0.0&quot;
                    self.dependencies = []
                    self.initialized = False

                def initialize(self, container):
                    self.initialized = True

                def shutdown(self):
                    pass

                def get_capabilities(self):
                    return {&quot;test&quot;: True}

            test_tool = TestTool(i</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_loader.py (Line 252:17 - Line 267:45), tests/plugins/test_plugin_loader.py (Line 174:17 - Line 189:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn46" onclick="toggleCodeBlock('cloneGroup46', 'expandBtn46', 'collapseBtn46')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn46" onclick="toggleCodeBlock('cloneGroup46', 'expandBtn46', 'collapseBtn46')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup46"><code class="language-python text-sm text-gray-800">self.version = &quot;1.0.0&quot;
                self.dependencies = []
                self.initialized = False

            def initialize(self, container):
                self.initialized = True

            def shutdown(self):
                pass

            def get_capabilities(self):
                return {&quot;test&quot;: True}

        test_tool = TestTool()

        # Should raise an error or handle gracefully</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_loader.py (Line 280:17 - Line 295:27), tests/plugins/test_plugin_loader.py (Line 174:17 - Line 189:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn47" onclick="toggleCodeBlock('cloneGroup47', 'expandBtn47', 'collapseBtn47')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn47" onclick="toggleCodeBlock('cloneGroup47', 'expandBtn47', 'collapseBtn47')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup47"><code class="language-python text-sm text-gray-800">self.version = &quot;1.0.0&quot;
                self.dependencies = []
                self.initialized = False

            def initialize(self, container):
                self.initialized = True

            def shutdown(self):
                pass

            def get_capabilities(self):
                return {&quot;test&quot;: True}

        test_tool = TestTool()

        # Should handle gracefully</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_loader.py (Line 343:9 - Line 361:40), tests/plugins/test_plugin_loader.py (Line 171:9 - Line 189:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn48" onclick="toggleCodeBlock('cloneGroup48', 'expandBtn48', 'collapseBtn48')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn48" onclick="toggleCodeBlock('cloneGroup48', 'expandBtn48', 'collapseBtn48')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup48"><code class="language-python text-sm text-gray-800">class TestTool(Tool):
            def __init__(self):
                self.name = &quot;test_tool&quot;
                self.version = &quot;1.0.0&quot;
                self.dependencies = []
                self.initialized = False

            def initialize(self, container):
                self.initialized = True

            def shutdown(self):
                pass

            def get_capabilities(self):
                return {&quot;test&quot;: True}

        test_tool = TestTool()

        # Try to unload tool that wasn't loaded</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_loader.py (Line 380:21 - Line 397:30), tests/plugins/test_plugin_loader.py (Line 174:17 - Line 232:23)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn49" onclick="toggleCodeBlock('cloneGroup49', 'expandBtn49', 'collapseBtn49')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn49" onclick="toggleCodeBlock('cloneGroup49', 'expandBtn49', 'collapseBtn49')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup49"><code class="language-python text-sm text-gray-800">self.version = &quot;1.0.0&quot;
                    self.dependencies = []
                    self.initialized = False

                def initialize(self, container):
                    self.initialized = True

                def shutdown(self):
                    pass

                def get_capabilities(self):
                    return {&quot;test&quot;: True}

            test_tool = TestTool(i)
            tools.append(test_tool)
            loader.load_tool(test_tool)

        # Verify all tools are loaded</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_loader.py (Line 417:21 - Line 431:7), tests/plugins/test_plugin_loader.py (Line 174:17 - Line 229:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn50" onclick="toggleCodeBlock('cloneGroup50', 'expandBtn50', 'collapseBtn50')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn50" onclick="toggleCodeBlock('cloneGroup50', 'expandBtn50', 'collapseBtn50')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup50"><code class="language-python text-sm text-gray-800">self.version = &quot;1.0.0&quot;
                    self.dependencies = []
                    self.initialized = False

                def initialize(self, container):
                    self.initialized = True

                def shutdown(self):
                    pass

                def get_capabilities(self):
                    return {&quot;test&quot;: True}

            test_tool = TestTool(i)
            loader</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_loader.py (Line 457:17 - Line 473:12), tests/plugins/test_plugin_loader.py (Line 174:17 - Line 190:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn51" onclick="toggleCodeBlock('cloneGroup51', 'expandBtn51', 'collapseBtn51')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn51" onclick="toggleCodeBlock('cloneGroup51', 'expandBtn51', 'collapseBtn51')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup51"><code class="language-python text-sm text-gray-800">self.version = &quot;1.0.0&quot;
                self.dependencies = []
                self.initialized = False

            def initialize(self, container):
                self.initialized = True

            def shutdown(self):
                pass

            def get_capabilities(self):
                return {&quot;test&quot;: True}

        test_tool = TestTool()

        # Load tool
        loaded_tool</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_loader.py (Line 491:17 - Line 510:39), tests/plugins/test_plugin_loader.py (Line 75:17 - Line 159:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn52" onclick="toggleCodeBlock('cloneGroup52', 'expandBtn52', 'collapseBtn52')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn52" onclick="toggleCodeBlock('cloneGroup52', 'expandBtn52', 'collapseBtn52')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup52"><code class="language-python text-sm text-gray-800">self.version = &quot;1.0.0&quot;
                self.dependencies = []
                self.initialized = False
                self.shutdown_called = False

            def initialize(self, container):
                self.initialized = True

            def shutdown(self):
                self.shutdown_called = True

            def get_capabilities(self):
                return {&quot;test&quot;: True}

        test_tool = TestTool()

        # Load tool
        loaded_tool = loader.load_tool(test_tool)

        # Initialize through lifecycle manager</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_hot_reload.py (Line 294:9 - Line 311:42), tests/plugins/test_plugin_hot_reload.py (Line 74:9 - Line 91:22)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn53" onclick="toggleCodeBlock('cloneGroup53', 'expandBtn53', 'collapseBtn53')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn53" onclick="toggleCodeBlock('cloneGroup53', 'expandBtn53', 'collapseBtn53')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup53"><code class="language-python text-sm text-gray-800">hot_reload = ToolHotReload()

        # Watch multiple tools
        tools = [
            (&quot;tool1&quot;, Path(&quot;/test/tool1.py&quot;)),
            (&quot;tool2&quot;, Path(&quot;/test/tool2.py&quot;)),
            (&quot;tool3&quot;, Path(&quot;/test/tool3.py&quot;))
        ]

        for name, path in tools:
            hot_reload.watch_tool(name, path)

        # Verify all tools are being watched
        for name, path in tools:
            assert name in hot_reload._watched_tools
            assert hot_reload._watched_tools[name] == path

    def test_hot_reload_with_conditional_watching</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_discovery.py (Line 192:9 - Line 210:27), tests/plugins/test_plugin_discovery.py (Line 164:9 - Line 182:20)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn54" onclick="toggleCodeBlock('cloneGroup54', 'expandBtn54', 'collapseBtn54')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn54" onclick="toggleCodeBlock('cloneGroup54', 'expandBtn54', 'collapseBtn54')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup54"><code class="language-python text-sm text-gray-800">discovery = ToolDiscovery()

        # Add some discovered tools
        tool1 = ToolInfo(
            name=&quot;tool1&quot;,
            version=&quot;1.0.0&quot;,
            file_path=Path(&quot;/test/tool1.py&quot;),
            dependencies=[],
            capabilities={})
        tool2 = ToolInfo(
            name=&quot;tool2&quot;,
            version=&quot;1.0.0&quot;,
            file_path=Path(&quot;/test/tool2.py&quot;),
            dependencies=[],
            capabilities={})

        discovery._discovered_tools = [tool1, tool2]

        # Get all discovered tools</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_discovery.py (Line 218:9 - Line 236:20), tests/plugins/test_plugin_discovery.py (Line 164:9 - Line 182:20)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn55" onclick="toggleCodeBlock('cloneGroup55', 'expandBtn55', 'collapseBtn55')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn55" onclick="toggleCodeBlock('cloneGroup55', 'expandBtn55', 'collapseBtn55')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup55"><code class="language-python text-sm text-gray-800">discovery = ToolDiscovery()

        # Add some discovered tools
        tool1 = ToolInfo(
            name=&quot;tool1&quot;,
            version=&quot;1.0.0&quot;,
            file_path=Path(&quot;/test/tool1.py&quot;),
            dependencies=[],
            capabilities={})
        tool2 = ToolInfo(
            name=&quot;tool2&quot;,
            version=&quot;1.0.0&quot;,
            file_path=Path(&quot;/test/tool2.py&quot;),
            dependencies=[],
            capabilities={})

        discovery._discovered_tools = [tool1, tool2]

        # Get specific tool</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_discovery.py (Line 246:9 - Line 264:24), tests/plugins/test_plugin_discovery.py (Line 164:9 - Line 182:20)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn56" onclick="toggleCodeBlock('cloneGroup56', 'expandBtn56', 'collapseBtn56')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn56" onclick="toggleCodeBlock('cloneGroup56', 'expandBtn56', 'collapseBtn56')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup56"><code class="language-python text-sm text-gray-800">discovery = ToolDiscovery()

        # Add some discovered tools
        tool1 = ToolInfo(
            name=&quot;tool1&quot;,
            version=&quot;1.0.0&quot;,
            file_path=Path(&quot;/test/tool1.py&quot;),
            dependencies=[],
            capabilities={})
        tool2 = ToolInfo(
            name=&quot;tool2&quot;,
            version=&quot;1.0.0&quot;,
            file_path=Path(&quot;/test/tool2.py&quot;),
            dependencies=[],
            capabilities={})

        discovery._discovered_tools = [tool1, tool2]

        # Check discovered tool</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_discovery.py (Line 409:5 - Line 431:29), tests/plugins/test_plugin_discovery.py (Line 371:4 - Line 393:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn57" onclick="toggleCodeBlock('cloneGroup57', 'expandBtn57', 'collapseBtn57')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn57" onclick="toggleCodeBlock('cloneGroup57', 'expandBtn57', 'collapseBtn57')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup57"><code class="language-python text-sm text-gray-800">):
            mock_file = MagicMock()
            mock_file.is_file.return_value = True
            mock_file.suffix = '.py'
            mock_file.stem = f'tool_{i}'
            mock_file.exists.return_value = True
            mock_file.stat.return_value.st_size = 100
            mock_files.append(mock_file)

        mock_dir.iterdir.return_value = mock_files

        # Mock the discovery process
        with patch.object(discovery, '_extract_tool_info') as mock_extract:
            mock_extract.return_value = ToolInfo(
                name=&quot;test_tool&quot;,
                version=&quot;1.0.0&quot;,
                file_path=Path(&quot;/test/tool.py&quot;),
                dependencies=[],
                capabilities={}
            )

            with patch('builtins.open', MagicMock()):
                # Test discovery performance</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_discovery.py (Line 473:9 - Line 495:6), tests/plugins/test_plugin_discovery.py (Line 446:2 - Line 467:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn58" onclick="toggleCodeBlock('cloneGroup58', 'expandBtn58', 'collapseBtn58')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn58" onclick="toggleCodeBlock('cloneGroup58', 'expandBtn58', 'collapseBtn58')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup58"><code class="language-python text-sm text-gray-800">)

        # Mock discovery of tools
        with patch.object(discovery, 'discover_tools_in_directory') as mock_discover:
            tool_info = ToolInfo(
                name=&quot;test_tool&quot;,
                version=&quot;1.0.0&quot;,
                file_path=Path(&quot;/test/tool.py&quot;),
                dependencies=[],
                capabilities={}
            )
            mock_discover.return_value = [tool_info]

            # Discover tools
            discovered_tools = discovery.discover_tools_in_directory(
                Path(&quot;/test&quot;))

            # Verify integration
            assert len(discovered_tools) == 1
            assert discovered_tools[0] is tool_info


class</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_compatibility.py (Line 104:9 - Line 134:27), tests/plugins/test_plugin_compatibility.py (Line 62:9 - Line 92:22)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn59" onclick="toggleCodeBlock('cloneGroup59', 'expandBtn59', 'collapseBtn59')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn59" onclick="toggleCodeBlock('cloneGroup59', 'expandBtn59', 'collapseBtn59')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup59"><code class="language-python text-sm text-gray-800">compatibility = ToolCompatibility()

        # Create a test tool
        class TestTool(Tool):
            @property
            def name(self) -&gt; str:
                return &quot;test_tool&quot;

            @property
            def version(self) -&gt; str:
                return &quot;1.0.0&quot;

            @property
            def dependencies(self) -&gt; List[str]:
                return [&quot;core&gt;=1.0.0&quot;]

            def __init__(self):
                self.initialized = False

            def initialize(self, container):
                self.initialized = True

            def shutdown(self):
                pass

            def get_capabilities(self):
                return {&quot;test&quot;: True}

        test_tool = TestTool()

        # Get compatibility report</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_compatibility.py (Line 156:13 - Line 176:16), tests/plugins/test_plugin_compatibility.py (Line 70:13 - Line 90:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn60" onclick="toggleCodeBlock('cloneGroup60', 'expandBtn60', 'collapseBtn60')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn60" onclick="toggleCodeBlock('cloneGroup60', 'expandBtn60', 'collapseBtn60')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup60"><code class="language-python text-sm text-gray-800">@property
            def version(self) -&gt; str:
                return &quot;1.0.0&quot;

            @property
            def dependencies(self) -&gt; List[str]:
                return [&quot;core&gt;=1.0.0&quot;]

            def __init__(self):
                self.initialized = False

            def initialize(self, container):
                self.initialized = True

            def shutdown(self):
                pass

            def get_capabilities(self):
                return {&quot;test&quot;: True}

        compatible_tool</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_compatibility.py (Line 271:13 - Line 291:16), tests/plugins/test_plugin_compatibility.py (Line 234:13 - Line 254:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn61" onclick="toggleCodeBlock('cloneGroup61', 'expandBtn61', 'collapseBtn61')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn61" onclick="toggleCodeBlock('cloneGroup61', 'expandBtn61', 'collapseBtn61')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup61"><code class="language-python text-sm text-gray-800">@property
            def version(self) -&gt; str:
                return &quot;1.0.0&quot;

            @property
            def dependencies(self) -&gt; List[str]:
                return []

            def __init__(self):
                self.initialized = False

            def initialize(self, container):
                self.initialized = True

            def shutdown(self):
                pass

            def get_capabilities(self):
                return {&quot;test&quot;: True}

        empty_name_tool</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_compatibility.py (Line 313:13 - Line 329:21), tests/plugins/test_plugin_compatibility.py (Line 238:13 - Line 254:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn62" onclick="toggleCodeBlock('cloneGroup62', 'expandBtn62', 'collapseBtn62')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn62" onclick="toggleCodeBlock('cloneGroup62', 'expandBtn62', 'collapseBtn62')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup62"><code class="language-python text-sm text-gray-800">@property
            def dependencies(self) -&gt; List[str]:
                return []

            def __init__(self):
                self.initialized = False

            def initialize(self, container):
                self.initialized = True

            def shutdown(self):
                pass

            def get_capabilities(self):
                return {&quot;test&quot;: True}

        invalid_version_tool</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_compatibility.py (Line 426:17 - Line 449:42), tests/plugins/test_plugin_compatibility.py (Line 383:17 - Line 406:36)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn63" onclick="toggleCodeBlock('cloneGroup63', 'expandBtn63', 'collapseBtn63')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn63" onclick="toggleCodeBlock('cloneGroup63', 'expandBtn63', 'collapseBtn63')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup63"><code class="language-python text-sm text-gray-800">@property
                def version(self) -&gt; str:
                    return &quot;1.0.0&quot;

                @property
                def dependencies(self) -&gt; List[str]:
                    return [&quot;core&gt;=1.0.0&quot;]

                def __init__(self, tool_id):
                    self.initialized = False

                def initialize(self, container):
                    self.initialized = True

                def shutdown(self):
                    pass

                def get_capabilities(self):
                    return {&quot;test&quot;: True}

            test_tool = TestTool(i)
            tools.append(test_tool)

        # Test compatibility checking performance</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_compatibility.py (Line 467:13 - Line 496:9), tests/plugins/test_plugin_compatibility.py (Line 62:18 - Line 92:22)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn64" onclick="toggleCodeBlock('cloneGroup64', 'expandBtn64', 'collapseBtn64')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn64" onclick="toggleCodeBlock('cloneGroup64', 'expandBtn64', 'collapseBtn64')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup64"><code class="language-python text-sm text-gray-800">()

        # Create a test tool
        class TestTool(Tool):
            @property
            def name(self) -&gt; str:
                return &quot;test_tool&quot;

            @property
            def version(self) -&gt; str:
                return &quot;1.0.0&quot;

            @property
            def dependencies(self) -&gt; List[str]:
                return [&quot;core&gt;=1.0.0&quot;]

            def __init__(self):
                self.initialized = False

            def initialize(self, container):
                self.initialized = True

            def shutdown(self):
                pass

            def get_capabilities(self):
                return {&quot;test&quot;: True}

        test_tool = TestTool()
        registry</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_compatibility.py (Line 510:9 - Line 540:12), tests/plugins/test_plugin_compatibility.py (Line 62:2 - Line 92:22)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn65" onclick="toggleCodeBlock('cloneGroup65', 'expandBtn65', 'collapseBtn65')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn65" onclick="toggleCodeBlock('cloneGroup65', 'expandBtn65', 'collapseBtn65')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup65"><code class="language-python text-sm text-gray-800">)

        # Create a test tool
        class TestTool(Tool):
            @property
            def name(self) -&gt; str:
                return &quot;test_tool&quot;

            @property
            def version(self) -&gt; str:
                return &quot;1.0.0&quot;

            @property
            def dependencies(self) -&gt; List[str]:
                return [&quot;core&gt;=1.0.0&quot;]

            def __init__(self):
                self.initialized = False

            def initialize(self, container):
                self.initialized = True

            def shutdown(self):
                pass

            def get_capabilities(self):
                return {&quot;test&quot;: True}

        test_tool = TestTool()

        # Load tool</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_compatibility.py (Line 527:17 - Line 543:22), tests/plugins/test_plugin_loader.py (Line 459:17 - Line 475:45)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn66" onclick="toggleCodeBlock('cloneGroup66', 'expandBtn66', 'collapseBtn66')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn66" onclick="toggleCodeBlock('cloneGroup66', 'expandBtn66', 'collapseBtn66')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup66"><code class="language-python text-sm text-gray-800">self.initialized = False

            def initialize(self, container):
                self.initialized = True

            def shutdown(self):
                pass

            def get_capabilities(self):
                return {&quot;test&quot;: True}

        test_tool = TestTool()

        # Load tool
        loaded_tool = loader.load_tool(test_tool)

        # Check compatibility</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_compatibility.py (Line 699:9 - Line 724:20), tests/plugins/test_plugin_compatibility.py (Line 151:9 - Line 90:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn67" onclick="toggleCodeBlock('cloneGroup67', 'expandBtn67', 'collapseBtn67')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn67" onclick="toggleCodeBlock('cloneGroup67', 'expandBtn67', 'collapseBtn67')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup67"><code class="language-python text-sm text-gray-800">class CompatibleTool(Tool):
            @property
            def name(self) -&gt; str:
                return &quot;compatible_tool&quot;

            @property
            def version(self) -&gt; str:
                return &quot;1.0.0&quot;

            @property
            def dependencies(self) -&gt; List[str]:
                return [&quot;core&gt;=1.0.0&quot;]

            def __init__(self):
                self.initialized = False

            def initialize(self, container):
                self.initialized = True

            def shutdown(self):
                pass

            def get_capabilities(self):
                return {&quot;test&quot;: True}

        # Incompatible tool</code></pre></div><div class="py-4"><p class="text-gray-600">tests/plugins/test_plugin_compatibility.py (Line 725:9 - Line 750:6), tests/plugins/test_plugin_compatibility.py (Line 188:9 - Line 213:18)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn68" onclick="toggleCodeBlock('cloneGroup68', 'expandBtn68', 'collapseBtn68')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn68" onclick="toggleCodeBlock('cloneGroup68', 'expandBtn68', 'collapseBtn68')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup68"><code class="language-python text-sm text-gray-800">class IncompatibleTool(Tool):
            @property
            def name(self) -&gt; str:
                return &quot;incompatible_tool&quot;

            @property
            def version(self) -&gt; str:
                return &quot;1.0.0&quot;

            @property
            def dependencies(self) -&gt; List[str]:
                return [&quot;nonexistent&gt;=1.0.0&quot;]

            def __init__(self):
                self.initialized = False

            def initialize(self, container):
                self.initialized = True

            def shutdown(self):
                pass

            def get_capabilities(self):
                return {&quot;test&quot;: True}

        tools</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_security.py (Line 141:8 - Line 160:44), tests/integration/test_system_security.py (Line 68:4 - Line 87:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn69" onclick="toggleCodeBlock('cloneGroup69', 'expandBtn69', 'collapseBtn69')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn69" onclick="toggleCodeBlock('cloneGroup69', 'expandBtn69', 'collapseBtn69')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup69"><code class="language-python text-sm text-gray-800">) as f:
                        f.write(content)

            # Mock container and services
            mock_container = MagicMock()
            mock_db_connection = MagicMock()
            mock_container.get_service.return_value = mock_db_connection

            scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            assert scan_result == 0  # Should handle various file types securely</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_reliability.py (Line 15:1 - Line 22:24), tests/integration/test_system_security.py (Line 14:1 - Line 21:32)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn70" onclick="toggleCodeBlock('cloneGroup70', 'expandBtn70', 'collapseBtn70')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn70" onclick="toggleCodeBlock('cloneGroup70', 'expandBtn70', 'collapseBtn70')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup70"><code class="language-python text-sm text-gray-800">import json
from unittest.mock import patch, MagicMock
from nodupe.core.main import main
from nodupe.tools.commands.scan import ScanTool
from nodupe.tools.commands.apply import ApplyTool
from nodupe.tools.commands.similarity import SimilarityCommandTool as SimilarityTool

class TestContinuousOperation</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_reliability.py (Line 153:13 - Line 164:34), tests/integration/test_system_security.py (Line 76:13 - Line 87:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn71" onclick="toggleCodeBlock('cloneGroup71', 'expandBtn71', 'collapseBtn71')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn71" onclick="toggleCodeBlock('cloneGroup71', 'expandBtn71', 'collapseBtn71')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup71"><code class="language-python text-sm text-gray-800">scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            assert scan_result == 0  # Should handle stress gracefully</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_reliability.py (Line 235:13 - Line 246:43), tests/integration/test_system_security.py (Line 76:13 - Line 87:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn72" onclick="toggleCodeBlock('cloneGroup72', 'expandBtn72', 'collapseBtn72')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn72" onclick="toggleCodeBlock('cloneGroup72', 'expandBtn72', 'collapseBtn72')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup72"><code class="language-python text-sm text-gray-800">scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            assert scan_result == 0  # Should handle file variations gracefully</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_reliability.py (Line 566:21 - Line 578:11), tests/integration/test_system_security.py (Line 526:21 - Line 538:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn73" onclick="toggleCodeBlock('cloneGroup73', 'expandBtn73', 'collapseBtn73')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn73" onclick="toggleCodeBlock('cloneGroup73', 'expandBtn73', 'collapseBtn73')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup73"><code class="language-python text-sm text-gray-800">scan_args.min_size = 0
                    scan_args.max_size = None
                    scan_args.extensions = None
                    scan_args.exclude = None
                    scan_args.verbose = False
                    scan_args.container = mock_container

                    result = tool.execute_scan(scan_args)

                elif op_name == &quot;apply&quot;:
                    apply_args = MagicMock()
                    apply_args.action = &quot;list&quot;
                    apply_args.input = extra_data</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_performance.py (Line 10:1 - Line 22:28), tests/integration/test_system_reliability.py (Line 10:1 - Line 21:32)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn74" onclick="toggleCodeBlock('cloneGroup74', 'expandBtn74', 'collapseBtn74')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn74" onclick="toggleCodeBlock('cloneGroup74', 'expandBtn74', 'collapseBtn74')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup74"><code class="language-python text-sm text-gray-800">import pytest
import sys
import os
import tempfile
import time
import json
from unittest.mock import patch, MagicMock
from nodupe.core.main import main
from nodupe.tools.commands.scan import ScanTool
from nodupe.tools.commands.apply import ApplyTool
from nodupe.tools.commands.similarity import SimilarityCommandTool as SimilarityTool

class TestPerformanceBenchmarking</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_performance.py (Line 40:13 - Line 56:5), tests/integration/test_system_reliability.py (Line 371:13 - Line 387:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn75" onclick="toggleCodeBlock('cloneGroup75', 'expandBtn75', 'collapseBtn75')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn75" onclick="toggleCodeBlock('cloneGroup75', 'expandBtn75', 'collapseBtn75')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup75"><code class="language-python text-sm text-gray-800">scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            start_time = time.time()
            scan_result = scan_tool.execute_scan(scan_args)
            end_time = time.time()

            assert scan_result == 0
            execution_time = end_time - start_time
            assert execution_time &lt; 10.0</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_performance.py (Line 82:13 - Line 96:4), tests/integration/test_system_reliability.py (Line 413:13 - Line 427:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn76" onclick="toggleCodeBlock('cloneGroup76', 'expandBtn76', 'collapseBtn76')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn76" onclick="toggleCodeBlock('cloneGroup76', 'expandBtn76', 'collapseBtn76')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup76"><code class="language-python text-sm text-gray-800">apply_tool = ApplyTool()
            apply_args = MagicMock()
            apply_args.action = &quot;list&quot;
            apply_args.input = duplicates_file
            apply_args.target_dir = None
            apply_args.dry_run = True
            apply_args.verbose = False

            start_time = time.time()
            apply_result = apply_tool.execute_apply(apply_args)
            end_time = time.time()

            assert apply_result == 0
            execution_time = end_time - start_time
            assert execution_time &lt; 5.0</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_performance.py (Line 146:13 - Line 162:5), tests/integration/test_system_reliability.py (Line 371:13 - Line 387:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn77" onclick="toggleCodeBlock('cloneGroup77', 'expandBtn77', 'collapseBtn77')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn77" onclick="toggleCodeBlock('cloneGroup77', 'expandBtn77', 'collapseBtn77')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup77"><code class="language-python text-sm text-gray-800">scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            start_time = time.time()
            scan_result = scan_tool.execute_scan(scan_args)
            end_time = time.time()

            assert scan_result == 0
            execution_time = end_time - start_time
            assert execution_time &lt; 15.0</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_performance.py (Line 186:14 - Line 203:4), tests/integration/test_system_performance.py (Line 79:17 - Line 427:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn78" onclick="toggleCodeBlock('cloneGroup78', 'expandBtn78', 'collapseBtn78')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn78" onclick="toggleCodeBlock('cloneGroup78', 'expandBtn78', 'collapseBtn78')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup78"><code class="language-python text-sm text-gray-800">, f)

            # Test apply performance
            apply_tool = ApplyTool()
            apply_args = MagicMock()
            apply_args.action = &quot;list&quot;
            apply_args.input = duplicates_file
            apply_args.target_dir = None
            apply_args.dry_run = True
            apply_args.verbose = False

            start_time = time.time()
            apply_result = apply_tool.execute_apply(apply_args)
            end_time = time.time()

            assert apply_result == 0
            execution_time = end_time - start_time
            assert execution_time &lt; 8.0</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_performance.py (Line 224:13 - Line 237:4), tests/integration/test_system_security.py (Line 76:13 - Line 87:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn79" onclick="toggleCodeBlock('cloneGroup79', 'expandBtn79', 'collapseBtn79')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn79" onclick="toggleCodeBlock('cloneGroup79', 'expandBtn79', 'collapseBtn79')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup79"><code class="language-python text-sm text-gray-800">scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            assert scan_result == 0

    def</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_performance.py (Line 308:13 - Line 319:4), tests/integration/test_system_reliability.py (Line 376:13 - Line 387:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn80" onclick="toggleCodeBlock('cloneGroup80', 'expandBtn80', 'collapseBtn80')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn80" onclick="toggleCodeBlock('cloneGroup80', 'expandBtn80', 'collapseBtn80')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup80"><code class="language-python text-sm text-gray-800">scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            start_time = time.time()
            scan_result = scan_tool.execute_scan(scan_args)
            end_time = time.time()

            assert scan_result == 0
            execution_time = end_time - start_time
            assert execution_time &lt; 5.0</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_performance.py (Line 385:7 - Line 398:11), tests/integration/test_system_reliability.py (Line 373:9 - Line 386:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn81" onclick="toggleCodeBlock('cloneGroup81', 'expandBtn81', 'collapseBtn81')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn81" onclick="toggleCodeBlock('cloneGroup81', 'expandBtn81', 'collapseBtn81')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup81"><code class="language-python text-sm text-gray-800">]
                scan_args.min_size = 0
                scan_args.max_size = None
                scan_args.extensions = None
                scan_args.exclude = None
                scan_args.verbose = False
                scan_args.container = mock_container

                start_time = time.time()
                scan_result = scan_tool.execute_scan(scan_args)
                end_time = time.time()

                assert scan_result == 0
                total_time</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_error_recovery.py (Line 119:21 - Line 137:46), tests/integration/test_system_security.py (Line 69:8 - Line 87:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn82" onclick="toggleCodeBlock('cloneGroup82', 'expandBtn82', 'collapseBtn82')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn82" onclick="toggleCodeBlock('cloneGroup82', 'expandBtn82', 'collapseBtn82')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup82"><code class="language-python text-sm text-gray-800">)

            # Mock container and services
            mock_container = MagicMock()
            mock_db_connection = MagicMock()
            mock_container.get_service.return_value = mock_db_connection

            scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            # Should handle mixed file content gracefully</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_error_recovery.py (Line 223:19 - Line 237:5), tests/integration/test_system_security.py (Line 69:8 - Line 83:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn83" onclick="toggleCodeBlock('cloneGroup83', 'expandBtn83', 'collapseBtn83')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn83" onclick="toggleCodeBlock('cloneGroup83', 'expandBtn83', 'collapseBtn83')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup83"><code class="language-python text-sm text-gray-800">)

            # Mock container and services
            mock_container = MagicMock()
            mock_db_connection = MagicMock()
            mock_container.get_service.return_value = mock_db_connection

            scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = True</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_error_recovery.py (Line 385:28 - Line 403:33), tests/integration/test_system_security.py (Line 69:8 - Line 87:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn84" onclick="toggleCodeBlock('cloneGroup84', 'expandBtn84', 'collapseBtn84')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn84" onclick="toggleCodeBlock('cloneGroup84', 'expandBtn84', 'collapseBtn84')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup84"><code class="language-python text-sm text-gray-800">)

            # Mock container and services
            mock_container = MagicMock()
            mock_db_connection = MagicMock()
            mock_container.get_service.return_value = mock_db_connection

            scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            # Should maintain data integrity</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_error_recovery.py (Line 463:13 - Line 474:20), tests/integration/test_system_security.py (Line 72:13 - Line 237:25)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn85" onclick="toggleCodeBlock('cloneGroup85', 'expandBtn85', 'collapseBtn85')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn85" onclick="toggleCodeBlock('cloneGroup85', 'expandBtn85', 'collapseBtn85')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup85"><code class="language-python text-sm text-gray-800">mock_container = MagicMock()
            mock_db_connection = MagicMock()
            mock_container.get_service.return_value = mock_db_connection

            scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = True  # Enable monitoring</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_error_recovery.py (Line 546:15 - Line 568:31), tests/integration/test_system_security.py (Line 308:19 - Line 330:31)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn86" onclick="toggleCodeBlock('cloneGroup86', 'expandBtn86', 'collapseBtn86')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn86" onclick="toggleCodeBlock('cloneGroup86', 'expandBtn86', 'collapseBtn86')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup86"><code class="language-python text-sm text-gray-800">:
                mock_container = scenario[&quot;container&quot;]
                if mock_container:
                    mock_db_connection = MagicMock()
                    mock_container.get_service.return_value = mock_db_connection

                scan_args = MagicMock()
                scan_args.paths = scenario[&quot;paths&quot;]
                scan_args.min_size = 0
                scan_args.max_size = None
                scan_args.extensions = None
                scan_args.exclude = None
                scan_args.verbose = False
                scan_args.container = scenario[&quot;container&quot;]

                scan_result = scan_tool.execute_scan(scan_args)

                if scenario[&quot;expected&quot;] == 0:
                    assert scan_result == 0
                else:
                    assert isinstance(scan_result, int)

    def test_apply_recovery_validation</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_error_recovery.py (Line 576:13 - Line 588:35), tests/integration/test_system_security.py (Line 338:22 - Line 350:39)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn87" onclick="toggleCodeBlock('cloneGroup87', 'expandBtn87', 'collapseBtn87')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn87" onclick="toggleCodeBlock('cloneGroup87', 'expandBtn87', 'collapseBtn87')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup87"><code class="language-python text-sm text-gray-800">,
                        &quot;files&quot;: [
                            {&quot;path&quot;: &quot;/tmp/valid1.txt&quot;, &quot;size&quot;: 100, &quot;type&quot;: &quot;txt&quot;},
                            {&quot;path&quot;: &quot;/tmp/valid2.txt&quot;, &quot;size&quot;: 100, &quot;type&quot;: &quot;txt&quot;}
                        ]
                    }
                ]
            }

            with open(valid_file, &quot;w&quot;) as f:
                json.dump(valid_data, f)

            # Test multiple recovery scenarios</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_system_error_recovery.py (Line 611:15 - Line 626:3), tests/integration/test_system_security.py (Line 373:19 - Line 388:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn88" onclick="toggleCodeBlock('cloneGroup88', 'expandBtn88', 'collapseBtn88')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn88" onclick="toggleCodeBlock('cloneGroup88', 'expandBtn88', 'collapseBtn88')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup88"><code class="language-python text-sm text-gray-800">:
                apply_args = MagicMock()
                apply_args.action = scenario[&quot;action&quot;]
                apply_args.input = scenario[&quot;input&quot;]
                apply_args.target_dir = None
                apply_args.dry_run = True
                apply_args.verbose = False

                apply_result = apply_tool.execute_apply(apply_args)

                if scenario[&quot;expected&quot;] == 0:
                    assert apply_result == 0
                else:
                    assert isinstance(apply_result, int)

if</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_end_to_end_workflows.py (Line 44:13 - Line 57:40), tests/integration/test_system_security.py (Line 76:13 - Line 87:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn89" onclick="toggleCodeBlock('cloneGroup89', 'expandBtn89', 'collapseBtn89')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn89" onclick="toggleCodeBlock('cloneGroup89', 'expandBtn89', 'collapseBtn89')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup89"><code class="language-python text-sm text-gray-800">scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            assert scan_result == 0

            # Create mock duplicates file for apply</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_end_to_end_workflows.py (Line 100:18 - Line 122:25), tests/integration/test_end_to_end_workflows.py (Line 35:28 - Line 87:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn90" onclick="toggleCodeBlock('cloneGroup90', 'expandBtn90', 'collapseBtn90')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn90" onclick="toggleCodeBlock('cloneGroup90', 'expandBtn90', 'collapseBtn90')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup90"><code class="language-python text-sm text-gray-800">)  # Creates duplicates
                test_files.append(test_file)

            # Mock container and services
            mock_container = MagicMock()
            mock_db_connection = MagicMock()
            mock_container.get_service.return_value = mock_db_connection

            # Test scan workflow
            scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            assert scan_result == 0

            # Create duplicates file</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_end_to_end_workflows.py (Line 166:22 - Line 187:27), tests/integration/test_end_to_end_workflows.py (Line 36:10 - Line 87:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn91" onclick="toggleCodeBlock('cloneGroup91', 'expandBtn91', 'collapseBtn91')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn91" onclick="toggleCodeBlock('cloneGroup91', 'expandBtn91', 'collapseBtn91')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup91"><code class="language-python text-sm text-gray-800">)

            # Mock container and services
            mock_container = MagicMock()
            mock_db_connection = MagicMock()
            mock_container.get_service.return_value = mock_db_connection

            # Test scan workflow
            scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            assert scan_result == 0

            # Test similarity workflow</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_end_to_end_workflows.py (Line 286:13 - Line 299:39), tests/integration/test_system_security.py (Line 76:13 - Line 87:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn92" onclick="toggleCodeBlock('cloneGroup92', 'expandBtn92', 'collapseBtn92')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn92" onclick="toggleCodeBlock('cloneGroup92', 'expandBtn92', 'collapseBtn92')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup92"><code class="language-python text-sm text-gray-800">scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            assert scan_result == 0

            # Verify database service was accessed</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_end_to_end_workflows.py (Line 394:13 - Line 407:43), tests/integration/test_system_security.py (Line 76:13 - Line 87:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn93" onclick="toggleCodeBlock('cloneGroup93', 'expandBtn93', 'collapseBtn93')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn93" onclick="toggleCodeBlock('cloneGroup93', 'expandBtn93', 'collapseBtn93')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup93"><code class="language-python text-sm text-gray-800">scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            assert scan_result == 0

            # Step 4: Create duplicates and apply list</code></pre></div><div class="py-4"><p class="text-gray-600">tests/integration/test_end_to_end_workflows.py (Line 475:13 - Line 492:6), tests/integration/test_system_security.py (Line 72:13 - Line 87:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn94" onclick="toggleCodeBlock('cloneGroup94', 'expandBtn94', 'collapseBtn94')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn94" onclick="toggleCodeBlock('cloneGroup94', 'expandBtn94', 'collapseBtn94')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup94"><code class="language-python text-sm text-gray-800">mock_container = MagicMock()
            mock_db_connection = MagicMock()
            mock_container.get_service.return_value = mock_db_connection

            scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            assert scan_result == 0

class</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_tool_loader.py (Line 136:9 - Line 144:47), tests/core/test_tool_loader.py (Line 102:9 - Line 110:42)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn95" onclick="toggleCodeBlock('cloneGroup95', 'expandBtn95', 'collapseBtn95')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn95" onclick="toggleCodeBlock('cloneGroup95', 'expandBtn95', 'collapseBtn95')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup95"><code class="language-python text-sm text-gray-800">loader = ToolLoader()
        mock_path = Path(&quot;/fake/tool.py&quot;)

        with patch.object(mock_path, 'exists', return_value=True), \
             patch.object(mock_path, 'suffix', '.py'), \
             patch('importlib.util.spec_from_file_location') as mock_spec_from_file, \
             patch('importlib.util.module_from_spec') as mock_module_from_spec:

            # Create a mock module with no Tool subclasses</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_tool_loader.py (Line 173:9 - Line 181:41), tests/core/test_tool_loader.py (Line 102:9 - Line 110:42)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn96" onclick="toggleCodeBlock('cloneGroup96', 'expandBtn96', 'collapseBtn96')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn96" onclick="toggleCodeBlock('cloneGroup96', 'expandBtn96', 'collapseBtn96')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup96"><code class="language-python text-sm text-gray-800">loader = ToolLoader()
        mock_path = Path(&quot;/fake/tool.py&quot;)

        with patch.object(mock_path, 'exists', return_value=True), \
             patch.object(mock_path, 'suffix', '.py'), \
             patch('importlib.util.spec_from_file_location') as mock_spec_from_file, \
             patch('importlib.util.module_from_spec') as mock_module_from_spec:

            # Create a mock module with invalid tool</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_tool_loader.py (Line 315:13 - Line 332:21), tests/core/test_tool_loader.py (Line 266:13 - Line 283:18)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn97" onclick="toggleCodeBlock('cloneGroup97', 'expandBtn97', 'collapseBtn97')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn97" onclick="toggleCodeBlock('cloneGroup97', 'expandBtn97', 'collapseBtn97')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup97"><code class="language-python text-sm text-gray-800">def initialize(self, container):
                pass

            def shutdown(self):
                pass

            def get_capabilities(self):
                return {}

            @property
            def api_methods(self):
                return {}

            def run_standalone(self, args):
                return 0

            def describe_usage(self):
                return &quot;Failing tool usage&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_tool_base.py (Line 14:2 - Line 46:30), tests/core/test_tool_loader.py (Line 67:2 - Line 99:18)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn98" onclick="toggleCodeBlock('cloneGroup98', 'expandBtn98', 'collapseBtn98')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn98" onclick="toggleCodeBlock('cloneGroup98', 'expandBtn98', 'collapseBtn98')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup98"><code class="language-python text-sm text-gray-800">[]
        self._initialized = False

    @property
    def name(self):
        return self._name

    @property
    def version(self):
        return self._version

    @property
    def dependencies(self):
        return self._dependencies

    def initialize(self, container):
        self._initialized = True

    def shutdown(self):
        self._initialized = False

    def get_capabilities(self):
        return {&quot;test&quot;: &quot;capability&quot;}

    @property
    def api_methods(self):
        return {}

    def run_standalone(self, args):
        return 0

    def describe_usage(self):
        return &quot;Test tool usage description&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_plugins.py (Line 730:13 - Line 746:19), tests/core/test_plugins.py (Line 442:13 - Line 458:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn99" onclick="toggleCodeBlock('cloneGroup99', 'expandBtn99', 'collapseBtn99')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn99" onclick="toggleCodeBlock('cloneGroup99', 'expandBtn99', 'collapseBtn99')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup99"><code class="language-python text-sm text-gray-800">@property
            def version(self): return &quot;1.0.0&quot;
            @property
            def dependencies(self): return []

            def __init__(self):
                self.initialized = False
                self.shutdown_called = False

            def initialize(self, container):
                self.initialized = True

            def shutdown(self):
                self.shutdown_called = True

            def get_capabilities(self):
                return {&quot;integration_test&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_loader.py (Line 228:9 - Line 238:2), tests/core/test_loader.py (Line 148:9 - Line 158:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn100" onclick="toggleCodeBlock('cloneGroup100', 'expandBtn100', 'collapseBtn100')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn100" onclick="toggleCodeBlock('cloneGroup100', 'expandBtn100', 'collapseBtn100')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup100"><code class="language-python text-sm text-gray-800">loader = CoreLoader()

        with patch('nodupe.core.loader.load_config') as mock_load_config, \
                patch.object(loader, '_apply_platform_autoconfig') as mock_autoconfig, \
                patch('nodupe.core.loader.ToolRegistry') as mock_registry, \
                patch('nodupe.core.loader.create_tool_loader') as mock_loader, \
                patch('nodupe.core.loader.create_tool_discovery') as mock_discovery, \
                patch('nodupe.core.loader.create_lifecycle_manager') as mock_lifecycle, \
                patch('nodupe.core.loader.ToolHotReload') as mock_hot_reload, \
                patch('nodupe.core.loader.get_connection') as mock_db, \
                patch('nodupe.core.loader.logging') as mock_logging:</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_loader.py (Line 264:9 - Line 276:14), tests/core/test_loader.py (Line 148:9 - Line 240:38)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn101" onclick="toggleCodeBlock('cloneGroup101', 'expandBtn101', 'collapseBtn101')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn101" onclick="toggleCodeBlock('cloneGroup101', 'expandBtn101', 'collapseBtn101')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup101"><code class="language-python text-sm text-gray-800">loader = CoreLoader()

        with patch('nodupe.core.loader.load_config') as mock_load_config, \
                patch.object(loader, '_apply_platform_autoconfig') as mock_autoconfig, \
                patch('nodupe.core.loader.ToolRegistry') as mock_registry, \
                patch('nodupe.core.loader.create_tool_loader') as mock_loader, \
                patch('nodupe.core.loader.create_tool_discovery') as mock_discovery, \
                patch('nodupe.core.loader.create_lifecycle_manager') as mock_lifecycle, \
                patch('nodupe.core.loader.ToolHotReload') as mock_hot_reload, \
                patch('nodupe.core.loader.get_connection') as mock_db, \
                patch('nodupe.core.loader.logging') as mock_logging:

            # Mock config</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_loader.py (Line 301:9 - Line 311:45), tests/core/test_loader.py (Line 148:9 - Line 158:29)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn102" onclick="toggleCodeBlock('cloneGroup102', 'expandBtn102', 'collapseBtn102')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn102" onclick="toggleCodeBlock('cloneGroup102', 'expandBtn102', 'collapseBtn102')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup102"><code class="language-python text-sm text-gray-800">loader = CoreLoader()

        with patch('nodupe.core.loader.load_config') as mock_load_config, \
                patch.object(loader, '_apply_platform_autoconfig') as mock_autoconfig, \
                patch('nodupe.core.loader.ToolRegistry') as mock_registry, \
                patch('nodupe.core.loader.create_tool_loader') as mock_loader, \
                patch('nodupe.core.loader.create_tool_discovery') as mock_discovery, \
                patch('nodupe.core.loader.create_lifecycle_manager') as mock_lifecycle, \
                patch('nodupe.core.loader.ToolHotReload') as mock_hot_reload, \
                patch('nodupe.core.loader.get_connection') as mock_db, \
                patch('nodupe.core.loader.autotune_hash_algorithm'</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_loader.py (Line 350:9 - Line 361:29), tests/core/test_loader.py (Line 148:9 - Line 312:45)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn103" onclick="toggleCodeBlock('cloneGroup103', 'expandBtn103', 'collapseBtn103')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn103" onclick="toggleCodeBlock('cloneGroup103', 'expandBtn103', 'collapseBtn103')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup103"><code class="language-python text-sm text-gray-800">loader = CoreLoader()

        with patch('nodupe.core.loader.load_config') as mock_load_config, \
                patch.object(loader, '_apply_platform_autoconfig') as mock_autoconfig, \
                patch('nodupe.core.loader.ToolRegistry') as mock_registry, \
                patch('nodupe.core.loader.create_tool_loader') as mock_loader, \
                patch('nodupe.core.loader.create_tool_discovery') as mock_discovery, \
                patch('nodupe.core.loader.create_lifecycle_manager') as mock_lifecycle, \
                patch('nodupe.core.loader.ToolHotReload') as mock_hot_reload, \
                patch('nodupe.core.loader.get_connection') as mock_db, \
                patch('nodupe.core.loader.autotune_hash_algorithm') as mock_autotune, \
                patch('nodupe.core.loader.logging'</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_loader.py (Line 389:9 - Line 405:17), tests/core/test_loader.py (Line 148:9 - Line 280:16)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn104" onclick="toggleCodeBlock('cloneGroup104', 'expandBtn104', 'collapseBtn104')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn104" onclick="toggleCodeBlock('cloneGroup104', 'expandBtn104', 'collapseBtn104')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup104"><code class="language-python text-sm text-gray-800">loader = CoreLoader()

        with patch('nodupe.core.loader.load_config') as mock_load_config, \
                patch.object(loader, '_apply_platform_autoconfig') as mock_autoconfig, \
                patch('nodupe.core.loader.ToolRegistry') as mock_registry, \
                patch('nodupe.core.loader.create_tool_loader') as mock_loader, \
                patch('nodupe.core.loader.create_tool_discovery') as mock_discovery, \
                patch('nodupe.core.loader.create_lifecycle_manager') as mock_lifecycle, \
                patch('nodupe.core.loader.ToolHotReload') as mock_hot_reload, \
                patch('nodupe.core.loader.get_connection') as mock_db, \
                patch('nodupe.core.loader.logging') as mock_logging:

            # Mock config
            mock_config = Mock()
            mock_config.config = {}

            mock_load_config</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_loader.py (Line 534:9 - Line 546:2), tests/core/test_loader.py (Line 148:9 - Line 313:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn105" onclick="toggleCodeBlock('cloneGroup105', 'expandBtn105', 'collapseBtn105')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn105" onclick="toggleCodeBlock('cloneGroup105', 'expandBtn105', 'collapseBtn105')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup105"><code class="language-python text-sm text-gray-800">loader = CoreLoader()

        with patch('nodupe.core.loader.load_config') as mock_load_config, \
                patch.object(loader, '_apply_platform_autoconfig') as mock_autoconfig, \
                patch('nodupe.core.loader.ToolRegistry') as mock_registry, \
                patch('nodupe.core.loader.create_tool_loader') as mock_loader, \
                patch('nodupe.core.loader.create_tool_discovery') as mock_discovery, \
                patch('nodupe.core.loader.create_lifecycle_manager') as mock_lifecycle, \
                patch('nodupe.core.loader.ToolHotReload') as mock_hot_reload, \
                patch('nodupe.core.loader.get_connection') as mock_db, \
                patch('nodupe.core.loader.autotune_hash_algorithm') as mock_autotune, \
                patch('nodupe.core.loader.create_autotuned_hasher') as mock_hasher, \
                patch('nodupe.core.loader.logging') as mock_logging,</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_loader.py (Line 561:13 - Line 596:16), tests/core/test_loader.py (Line 172:13 - Line 207:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn106" onclick="toggleCodeBlock('cloneGroup106', 'expandBtn106', 'collapseBtn106')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn106" onclick="toggleCodeBlock('cloneGroup106', 'expandBtn106', 'collapseBtn106')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup106"><code class="language-python text-sm text-gray-800">mock_path_instance = Mock()
            mock_path_instance.exists.return_value = True
            mock_path.return_value = mock_path_instance

            # Mock tool discovery
            mock_discovery_instance = Mock()
            mock_discovery_instance.discover_tools_in_directory.return_value = [
                Mock(name='core', path='tools/core.py')]
            mock_discovery_instance.get_discovered_tool.return_value = Mock(
                name='core', path='tools/core.py')
            mock_discovery_instance.get_discovered_tools.return_value = [
                Mock(name='core', path='tools/core.py')]
            mock_discovery.return_value = mock_discovery_instance

            # Mock tool loader
            mock_loader_instance = Mock()
            mock_loader_instance.load_tool_from_file.return_value = Mock
            mock_loader_instance.instantiate_tool.return_value = Mock(
                name='core')
            mock_loader_instance.register_loaded_tool.return_value = None
            mock_loader.return_value = mock_loader_instance

            # Mock other components
            mock_registry_instance = Mock()
            mock_registry.return_value = mock_registry_instance

            mock_lifecycle_instance = Mock()
            mock_lifecycle.return_value = mock_lifecycle_instance

            mock_hot_reload_instance = Mock()
            mock_hot_reload.return_value = mock_hot_reload_instance

            mock_db_instance = Mock()
            mock_db.return_value = mock_db_instance

            # Mock autotune</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_incremental.py (Line 56:16 - Line 66:2), tests/core/test_incremental.py (Line 36:9 - Line 46:9)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn107" onclick="toggleCodeBlock('cloneGroup107', 'expandBtn107', 'collapseBtn107')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn107" onclick="toggleCodeBlock('cloneGroup107', 'expandBtn107', 'collapseBtn107')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup107"><code class="language-python text-sm text-gray-800">)

        checkpoint_file = Path(self.scan_path) / Incremental.CHECKPOINT_FILE
        assert checkpoint_file.exists()

        with open(checkpoint_file, 'r') as f:
            data = json.load(f)

        assert data[&quot;scan_path&quot;] == self.scan_path
        assert data[&quot;processed_files&quot;] == processed_files
        assert data[&quot;metadata&quot;] == {</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_file_processor.py (Line 275:9 - Line 283:34), tests/core/test_file_walker.py (Line 201:9 - Line 209:25)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn108" onclick="toggleCodeBlock('cloneGroup108', 'expandBtn108', 'collapseBtn108')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn108" onclick="toggleCodeBlock('cloneGroup108', 'expandBtn108', 'collapseBtn108')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup108"><code class="language-python text-sm text-gray-800">assert len(results) == 3

        # Check that special characters are preserved
        file_paths = [r['path'] for r in results]
        assert any('file with spaces.txt' in path for path in file_paths)
        assert any('file-with-dashes.txt' in path for path in file_paths)
        assert any('file_with_underscores.txt' in path for path in file_paths)

    def test_process_files_error_handling</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_database.py (Line 314:9 - Line 325:18), tests/core/test_database.py (Line 295:9 - Line 306:23)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn109" onclick="toggleCodeBlock('cloneGroup109', 'expandBtn109', 'collapseBtn109')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn109" onclick="toggleCodeBlock('cloneGroup109', 'expandBtn109', 'collapseBtn109')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup109"><code class="language-python text-sm text-gray-800">with tempfile.NamedTemporaryFile(suffix='.db') as tmp:
            db = DatabaseConnection(tmp.name)
            _ = db.get_connection()  # Use underscore to indicate unused variable
            _init_full_schema(db)

            repo = FileRepository(db)

            # Add a file first
            file_id = repo.add_file(&quot;test.txt&quot;, 100, 12345, &quot;abc123&quot;)
            assert file_id is not None # Ensure file was added successfully

            # Update the file</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_database.py (Line 489:9 - Line 498:7), tests/core/test_database.py (Line 463:9 - Line 472:8)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn110" onclick="toggleCodeBlock('cloneGroup110', 'expandBtn110', 'collapseBtn110')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn110" onclick="toggleCodeBlock('cloneGroup110', 'expandBtn110', 'collapseBtn110')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup110"><code class="language-python text-sm text-gray-800">with tempfile.NamedTemporaryFile(suffix='.db') as tmp:
            db = DatabaseConnection(tmp.name)
            _ = db.get_connection()  # Use underscore to indicate unused variable
            _init_full_schema(db)

            repo = FileRepository(db)

            # Add files and mark some as duplicates
            original_id = repo.add_file(&quot;original.txt&quot;, 10, 12345, &quot;hash1&quot;)
            dup_id</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_database.py (Line 568:9 - Line 581:7), tests/core/test_database.py (Line 423:9 - Line 436:10)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn111" onclick="toggleCodeBlock('cloneGroup111', 'expandBtn111', 'collapseBtn111')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn111" onclick="toggleCodeBlock('cloneGroup111', 'expandBtn111', 'collapseBtn111')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup111"><code class="language-python text-sm text-gray-800">with tempfile.NamedTemporaryFile(suffix='.db') as tmp:
            db = DatabaseConnection(tmp.name)
            _ = db.get_connection()  # Use underscore to indicate unused variable
            _init_full_schema(db)

            repo = FileRepository(db)

            # Add some files
            file1_id = repo.add_file(&quot;file1.txt&quot;, 100, 12345, &quot;hash1&quot;)
            file2_id = repo.add_file(&quot;file2.txt&quot;, 200, 12346, &quot;hash2&quot;)
            assert file1_id is not None  # Ensure files were added successfully
            assert file2_id is not None

            assert</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_config.py (Line 238:9 - Line 252:22), tests/core/test_config.py (Line 93:9 - Line 106:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn112" onclick="toggleCodeBlock('cloneGroup112', 'expandBtn112', 'collapseBtn112')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn112" onclick="toggleCodeBlock('cloneGroup112', 'expandBtn112', 'collapseBtn112')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup112"><code class="language-python text-sm text-gray-800">config_data = {
            'tool': {
                'nodupe': {
                    'database': {'path': '/test/path'},
                    'scan': {'recursive': True}
                }
            }
        }

        with open(self.config_path, 'w') as f:
            toml.dump(config_data, f)

        config_manager = ConfigManager(str(self.config_path))

        # Test existing value</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_config.py (Line 266:9 - Line 282:16), tests/core/test_config.py (Line 37:9 - Line 53:12)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn113" onclick="toggleCodeBlock('cloneGroup113', 'expandBtn113', 'collapseBtn113')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn113" onclick="toggleCodeBlock('cloneGroup113', 'expandBtn113', 'collapseBtn113')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup113"><code class="language-python text-sm text-gray-800">config_data = {
            'tool': {
                'nodupe': {
                    'database': {'path': '/test/path'},
                    'scan': {'recursive': True},
                    'similarity': {'threshold': 0.8},
                    'performance': {'workers': 4},
                    'logging': {'level': 'info'}
                }
            }
        }

        with open(self.config_path, 'w') as f:
            toml.dump(config_data, f)

        config_manager = ConfigManager(str(self.config_path))
        assert config_manager.validate_config</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_config.py (Line 290:13 - Line 302:6), tests/core/test_config.py (Line 41:5 - Line 282:5)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn114" onclick="toggleCodeBlock('cloneGroup114', 'expandBtn114', 'collapseBtn114')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn114" onclick="toggleCodeBlock('cloneGroup114', 'expandBtn114', 'collapseBtn114')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup114"><code class="language-python text-sm text-gray-800">},
                    'similarity': {'threshold': 0.8},
                    'performance': {'workers': 4},
                    'logging': {'level': 'info'}
                }
            }
        }

        with open(self.config_path, 'w') as f:
            toml.dump(config_data, f)

        config_manager = ConfigManager(str(self.config_path))
        assert config_manager.validate_config() is False</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_config.py (Line 582:9 - Line 597:8), tests/core/test_config.py (Line 37:9 - Line 52:15)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn115" onclick="toggleCodeBlock('cloneGroup115', 'expandBtn115', 'collapseBtn115')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn115" onclick="toggleCodeBlock('cloneGroup115', 'expandBtn115', 'collapseBtn115')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup115"><code class="language-python text-sm text-gray-800">config_data = {
            'tool': {
                'nodupe': {
                    'database': {'path': '/test/path'},
                    'scan': {'recursive': True},
                    'similarity': {'threshold': 0.8},
                    'performance': {'workers': 4},
                    'logging': {'level': 'info'}
                }
            }
        }

        with open(self.config_path, 'w') as f:
            toml.dump(config_data, f)

        results</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_config.py (Line 741:9 - Line 758:28), tests/core/test_config.py (Line 37:9 - Line 53:7)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn116" onclick="toggleCodeBlock('cloneGroup116', 'expandBtn116', 'collapseBtn116')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn116" onclick="toggleCodeBlock('cloneGroup116', 'expandBtn116', 'collapseBtn116')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup116"><code class="language-python text-sm text-gray-800">config_data = {
            'tool': {
                'nodupe': {
                    'database': {'path': '/test/path'},
                    'scan': {'recursive': True},
                    'similarity': {'threshold': 0.8},
                    'performance': {'workers': 4},
                    'logging': {'level': 'info'}
                }
            }
        }

        with open(self.config_path, 'w') as f:
            toml.dump(config_data, f)

        config_manager = ConfigManager(str(self.config_path))

        # Serialize and deserialize</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_config.py (Line 790:9 - Line 805:12), tests/core/test_config.py (Line 37:9 - Line 52:14)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn117" onclick="toggleCodeBlock('cloneGroup117', 'expandBtn117', 'collapseBtn117')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn117" onclick="toggleCodeBlock('cloneGroup117', 'expandBtn117', 'collapseBtn117')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup117"><code class="language-python text-sm text-gray-800">config_data = {
            'tool': {
                'nodupe': {
                    'database': {'path': '/test/path'},
                    'scan': {'recursive': True},
                    'similarity': {'threshold': 0.8},
                    'performance': {'workers': 4},
                    'logging': {'level': 'info'}
                }
            }
        }

        with open(self.config_path, 'w') as f:
            toml.dump(config_data, f)

        config_manager = load_config</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_cli_integration.py (Line 46:13 - Line 59:42), tests/integration/test_system_security.py (Line 76:13 - Line 87:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn118" onclick="toggleCodeBlock('cloneGroup118', 'expandBtn118', 'collapseBtn118')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn118" onclick="toggleCodeBlock('cloneGroup118', 'expandBtn118', 'collapseBtn118')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup118"><code class="language-python text-sm text-gray-800">scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            assert scan_result == 0

            # Create a mock duplicates file for apply</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_cli_integration.py (Line 96:16 - Line 117:18), tests/core/test_cli_integration.py (Line 38:15 - Line 87:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn119" onclick="toggleCodeBlock('cloneGroup119', 'expandBtn119', 'collapseBtn119')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn119" onclick="toggleCodeBlock('cloneGroup119', 'expandBtn119', 'collapseBtn119')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup119"><code class="language-python text-sm text-gray-800">)

            # Mock container and services
            mock_container = MagicMock()
            mock_db_connection = MagicMock()
            mock_container.get_service.return_value = mock_db_connection

            # Test scan
            scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            assert scan_result == 0

            # Test similarity</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_cli_integration.py (Line 173:9 - Line 205:8), tests/core/test_cli_integration.py (Line 30:9 - Line 125:19)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn120" onclick="toggleCodeBlock('cloneGroup120', 'expandBtn120', 'collapseBtn120')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn120" onclick="toggleCodeBlock('cloneGroup120', 'expandBtn120', 'collapseBtn120')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup120"><code class="language-python text-sm text-gray-800">with tempfile.TemporaryDirectory() as temp_dir:
            # Create test files
            test_file1 = os.path.join(temp_dir, &quot;test1.txt&quot;)
            test_file2 = os.path.join(temp_dir, &quot;test2.txt&quot;)

            with open(test_file1, &quot;w&quot;) as f:
                f.write(&quot;test content&quot;)
            with open(test_file2, &quot;w&quot;) as f:
                f.write(&quot;test content&quot;)

            # Mock container and services
            mock_container = MagicMock()
            mock_db_connection = MagicMock()
            mock_container.get_service.return_value = mock_db_connection

            # Test scan
            scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            assert scan_result == 0

            # Create duplicates file
            duplicates_file = os.path.join(temp_dir, &quot;duplicates.json&quot;)
            duplicates_data = {
                &quot;files&quot;</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_cli_integration.py (Line 203:13 - Line 214:36), tests/core/test_cli_integration.py (Line 60:13 - Line 71:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn121" onclick="toggleCodeBlock('cloneGroup121', 'expandBtn121', 'collapseBtn121')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn121" onclick="toggleCodeBlock('cloneGroup121', 'expandBtn121', 'collapseBtn121')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup121"><code class="language-python text-sm text-gray-800">duplicates_file = os.path.join(temp_dir, &quot;duplicates.json&quot;)
            duplicates_data = {
                &quot;files&quot;: [
                    {&quot;path&quot;: test_file1, &quot;size&quot;: 12, &quot;hash&quot;: &quot;abc123&quot;},
                    {&quot;path&quot;: test_file2, &quot;size&quot;: 12, &quot;hash&quot;: &quot;abc123&quot;}
                ]
            }

            with open(duplicates_file, &quot;w&quot;) as f:
                json.dump(duplicates_data, f)

            # Test apply with different actions</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_cli_integration.py (Line 392:23 - Line 413:24), tests/core/test_cli_integration.py (Line 38:15 - Line 237:24)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn122" onclick="toggleCodeBlock('cloneGroup122', 'expandBtn122', 'collapseBtn122')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn122" onclick="toggleCodeBlock('cloneGroup122', 'expandBtn122', 'collapseBtn122')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup122"><code class="language-python text-sm text-gray-800">)

            # Mock container and services
            mock_container = MagicMock()
            mock_db_connection = MagicMock()
            mock_container.get_service.return_value = mock_db_connection

            # Test scan
            scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            assert scan_result == 0

    def test_complex_file_types</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_cli_integration.py (Line 456:19 - Line 481:3), tests/core/test_cli_integration.py (Line 38:15 - Line 206:11)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn123" onclick="toggleCodeBlock('cloneGroup123', 'expandBtn123', 'collapseBtn123')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn123" onclick="toggleCodeBlock('cloneGroup123', 'expandBtn123', 'collapseBtn123')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup123"><code class="language-python text-sm text-gray-800">)

            # Mock container and services
            mock_container = MagicMock()
            mock_db_connection = MagicMock()
            mock_container.get_service.return_value = mock_db_connection

            # Test scan
            scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            assert scan_result == 0

            # Create duplicates file
            duplicates_file = os.path.join(temp_dir, &quot;duplicates.json&quot;)
            duplicates_data = {
                &quot;files&quot;: [
                    {&quot;path&quot;: os</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_cli_integration.py (Line 483:9 - Line 504:18), tests/core/test_cli_integration.py (Line 207:9 - Line 228:6)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn124" onclick="toggleCodeBlock('cloneGroup124', 'expandBtn124', 'collapseBtn124')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn124" onclick="toggleCodeBlock('cloneGroup124', 'expandBtn124', 'collapseBtn124')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup124"><code class="language-python text-sm text-gray-800">}
                ]
            }

            with open(duplicates_file, &quot;w&quot;) as f:
                json.dump(duplicates_data, f)

            # Test apply with different actions
            apply_tool = ApplyTool()

            for action in [&quot;list&quot;, &quot;delete&quot;, &quot;move&quot;]:
                apply_args = MagicMock()
                apply_args.action = action
                apply_args.input = duplicates_file
                apply_args.target_dir = temp_dir if action != &quot;list&quot; else None
                apply_args.dry_run = True
                apply_args.verbose = False

                apply_result = apply_tool.execute_apply(apply_args)
                assert apply_result == 0

            # Test similarity</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_cli_commands.py (Line 46:13 - Line 54:34), tests/core/test_cli_integration.py (Line 32:13 - Line 40:30)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn125" onclick="toggleCodeBlock('cloneGroup125', 'expandBtn125', 'collapseBtn125')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn125" onclick="toggleCodeBlock('cloneGroup125', 'expandBtn125', 'collapseBtn125')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup125"><code class="language-python text-sm text-gray-800">test_file1 = os.path.join(temp_dir, &quot;test1.txt&quot;)
            test_file2 = os.path.join(temp_dir, &quot;test2.txt&quot;)

            with open(test_file1, &quot;w&quot;) as f:
                f.write(&quot;test content&quot;)
            with open(test_file2, &quot;w&quot;) as f:
                f.write(&quot;test content&quot;)

            # Mock the container and services</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_cli_commands.py (Line 96:9 - Line 106:32), tests/core/test_cli_integration.py (Line 30:9 - Line 40:30)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn126" onclick="toggleCodeBlock('cloneGroup126', 'expandBtn126', 'collapseBtn126')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn126" onclick="toggleCodeBlock('cloneGroup126', 'expandBtn126', 'collapseBtn126')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup126"><code class="language-python text-sm text-gray-800">with tempfile.TemporaryDirectory() as temp_dir:
            # Create test files
            test_file1 = os.path.join(temp_dir, &quot;test1.txt&quot;)
            test_file2 = os.path.join(temp_dir, &quot;test2.txt&quot;)

            with open(test_file1, &quot;w&quot;) as f:
                f.write(&quot;test content&quot;)
            with open(test_file2, &quot;w&quot;) as f:
                f.write(&quot;test content&quot;)

            # Create a duplicates JSON file</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_cli_commands.py (Line 107:13 - Line 118:16), tests/core/test_cli_integration.py (Line 60:13 - Line 71:13)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn127" onclick="toggleCodeBlock('cloneGroup127', 'expandBtn127', 'collapseBtn127')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn127" onclick="toggleCodeBlock('cloneGroup127', 'expandBtn127', 'collapseBtn127')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup127"><code class="language-python text-sm text-gray-800">duplicates_file = os.path.join(temp_dir, &quot;duplicates.json&quot;)
            duplicates_data = {
                &quot;files&quot;: [
                    {&quot;path&quot;: test_file1, &quot;size&quot;: 12, &quot;hash&quot;: &quot;abc123&quot;},
                    {&quot;path&quot;: test_file2, &quot;size&quot;: 12, &quot;hash&quot;: &quot;abc123&quot;}
                ]
            }

            with open(duplicates_file, &quot;w&quot;) as f:
                json.dump(duplicates_data, f)

            # Mock the args</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_cli_commands.py (Line 223:9 - Line 252:27), tests/core/test_cli_integration.py (Line 30:9 - Line 87:40)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn128" onclick="toggleCodeBlock('cloneGroup128', 'expandBtn128', 'collapseBtn128')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn128" onclick="toggleCodeBlock('cloneGroup128', 'expandBtn128', 'collapseBtn128')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup128"><code class="language-python text-sm text-gray-800">with tempfile.TemporaryDirectory() as temp_dir:
            # Create test files
            test_file1 = os.path.join(temp_dir, &quot;test1.txt&quot;)
            test_file2 = os.path.join(temp_dir, &quot;test2.txt&quot;)

            with open(test_file1, &quot;w&quot;) as f:
                f.write(&quot;test content&quot;)
            with open(test_file2, &quot;w&quot;) as f:
                f.write(&quot;test content&quot;)

            # Mock container and services
            mock_container = MagicMock()
            mock_db_connection = MagicMock()
            mock_container.get_service.return_value = mock_db_connection

            # Test scan
            scan_tool = ScanTool()
            scan_args = MagicMock()
            scan_args.paths = [temp_dir]
            scan_args.min_size = 0
            scan_args.max_size = None
            scan_args.extensions = None
            scan_args.exclude = None
            scan_args.verbose = False
            scan_args.container = mock_container

            scan_result = scan_tool.execute_scan(scan_args)
            assert scan_result == 0

            # Test apply (list action)</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_cli_commands.py (Line 270:9 - Line 284:37), tests/integration/test_end_to_end_workflows.py (Line 497:9 - Line 509:25)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn129" onclick="toggleCodeBlock('cloneGroup129', 'expandBtn129', 'collapseBtn129')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn129" onclick="toggleCodeBlock('cloneGroup129', 'expandBtn129', 'collapseBtn129')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup129"><code class="language-python text-sm text-gray-800"># Test scan with invalid path
        scan_tool = ScanTool()
        scan_args = MagicMock()
        scan_args.paths = [&quot;/nonexistent/path&quot;]
        scan_args.min_size = 0
        scan_args.max_size = None
        scan_args.extensions = None
        scan_args.exclude = None
        scan_args.verbose = False
        scan_args.container = None

        scan_result = scan_tool.execute_scan(scan_args)
        assert scan_result != 0

        # Test apply with invalid input file</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_archive_handler.py (Line 102:9 - Line 114:33), tests/core/test_archive_handler.py (Line 74:9 - Line 86:25)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn130" onclick="toggleCodeBlock('cloneGroup130', 'expandBtn130', 'collapseBtn130')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn130" onclick="toggleCodeBlock('cloneGroup130', 'expandBtn130', 'collapseBtn130')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup130"><code class="language-python text-sm text-gray-800">), str(extract_path))

        # Verify extraction
        assert len(extracted_files) == 1
        assert 'test.txt' in extracted_files
        assert extracted_files['test.txt'] == str(extract_path / 'test.txt')

        # Verify file content
        extracted_file = extract_path / 'test.txt'
        assert extracted_file.exists()
        assert extracted_file.read_text() == test_content

    def test_extract_nonexistent_archive</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_archive_handler.py (Line 436:9 - Line 445:34), tests/core/test_archive_handler.py (Line 314:13 - Line 323:48)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn131" onclick="toggleCodeBlock('cloneGroup131', 'expandBtn131', 'collapseBtn131')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn131" onclick="toggleCodeBlock('cloneGroup131', 'expandBtn131', 'collapseBtn131')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup131"><code class="language-python text-sm text-gray-800">extract_path.mkdir()

        extracted_files = self.archive_handler.extract_archive(str(zip_path), str(extract_path))

        assert len(extracted_files) == 1
        extracted_file = extract_path / 'test.txt'
        assert extracted_file.exists()
        assert extracted_file.read_text() == 'test content'

    def test_extract_archive_memory_usage</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_api_components.py (Line 197:21 - Line 213:46), tests/core/test_api_components.py (Line 165:14 - Line 181:42)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn132" onclick="toggleCodeBlock('cloneGroup132', 'expandBtn132', 'collapseBtn132')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn132" onclick="toggleCodeBlock('cloneGroup132', 'expandBtn132', 'collapseBtn132')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup132"><code class="language-python text-sm text-gray-800">,
            &quot;id&quot;: 1
        }
        mock_conn.recv.return_value = json.dumps(request_data).encode('utf-8')

        with patch('nodupe.core.api.ipc.logging') as mock_logging:
            mock_logger = Mock()
            mock_logging.getLogger.return_value = mock_logger

            server._handle_connection(mock_conn)

            # Should send error response
            mock_conn.sendall.assert_called_once()
            # Verify error was logged
            mock_logger.warning.assert_called()

    def test_handle_connection_successful_method_call</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_api_components.py (Line 267:17 - Line 282:29), tests/core/test_api_components.py (Line 230:14 - Line 245:31)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn133" onclick="toggleCodeBlock('cloneGroup133', 'expandBtn133', 'collapseBtn133')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn133" onclick="toggleCodeBlock('cloneGroup133', 'expandBtn133', 'collapseBtn133')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup133"><code class="language-python text-sm text-gray-800">,
            &quot;params&quot;: {&quot;param1&quot;: &quot;value1&quot;},
            &quot;id&quot;: 1
        }
        mock_conn.recv.return_value = json.dumps(request_data).encode('utf-8')

        with patch('nodupe.core.api.ipc.logging') as mock_logging:
            mock_logger = Mock()
            mock_logging.getLogger.return_value = mock_logger

            server._handle_connection(mock_conn)

            # Should call the method
            mock_method.assert_called_once_with(param1=&quot;value1&quot;)

            # Should send error response</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_accessible_base.py (Line 15:9 - Line 33:5), tests/core/test_tool_loader.py (Line 66:17 - Line 85:4)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn134" onclick="toggleCodeBlock('cloneGroup134', 'expandBtn134', 'collapseBtn134')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn134" onclick="toggleCodeBlock('cloneGroup134', 'expandBtn134', 'collapseBtn134')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup134"><code class="language-python text-sm text-gray-800">self._version = &quot;1.0.0&quot;
        self._dependencies = []
        self._initialized = False

    @property
    def name(self):
        return self._name

    @property
    def version(self):
        return self._version

    @property
    def dependencies(self):
        return self._dependencies

    def initialize(self, container):
        self._initialized = True
        self</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_accessible_base.py (Line 104:23 - Line 126:23), tests/core/test_example_accessible_tool.py (Line 209:22 - Line 231:22)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn135" onclick="toggleCodeBlock('cloneGroup135', 'expandBtn135', 'collapseBtn135')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn135" onclick="toggleCodeBlock('cloneGroup135', 'expandBtn135', 'collapseBtn135')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup135"><code class="language-python text-sm text-gray-800">()

        test_data = {
            &quot;status&quot;: &quot;running&quot;,
            &quot;count&quot;: 42,
            &quot;active&quot;: True,
            &quot;nested&quot;: {&quot;inner&quot;: &quot;value&quot;}
        }

        result = tool.format_for_accessibility(test_data)
        assert &quot;status:&quot; in result
        assert &quot;running&quot; in result
        assert &quot;count:&quot; in result
        assert &quot;42&quot; in result
        assert &quot;active:&quot; in result
        assert &quot;Enabled&quot; in result  # True should become &quot;Enabled&quot;
        assert &quot;nested:&quot; in result
        assert &quot;inner:&quot; in result
        assert &quot;value&quot; in result

    def test_format_for_accessibility_list(self):
        &quot;&quot;&quot;Test formatting list for accessibility.&quot;&quot;&quot;
        tool = ConcreteAccessibleTool</code></pre></div><div class="py-4"><p class="text-gray-600">tests/core/test_accessible_base.py (Line 140:23 - Line 173:21), tests/core/test_example_accessible_tool.py (Line 246:22 - Line 279:35)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn136" onclick="toggleCodeBlock('cloneGroup136', 'expandBtn136', 'collapseBtn136')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn136" onclick="toggleCodeBlock('cloneGroup136', 'expandBtn136', 'collapseBtn136')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup136"><code class="language-python text-sm text-gray-800">()

        # Test None
        result = tool.format_for_accessibility(None)
        assert result == &quot;Not set&quot;

        # Test boolean
        result = tool.format_for_accessibility(True)
        assert result == &quot;Enabled&quot;
        result = tool.format_for_accessibility(False)
        assert result == &quot;Disabled&quot;

        # Test numbers
        result = tool.format_for_accessibility(42)
        assert result == &quot;42&quot;
        result = tool.format_for_accessibility(3.14)
        assert result == &quot;3.14&quot;

        # Test string
        result = tool.format_for_accessibility(&quot;hello&quot;)
        assert result == &quot;'hello'&quot;
        result = tool.format_for_accessibility(&quot;&quot;)
        assert result == &quot;Empty&quot;

        # Test list
        result = tool.format_for_accessibility([1, 2, 3])
        assert &quot;List with 3 items&quot; in result

        # Test dict
        result = tool.format_for_accessibility({&quot;a&quot;: 1})
        assert &quot;Dictionary with 1 keys&quot; in result


class TestAccessibleStatus</code></pre></div><div class="py-4"><p class="text-gray-600">tests/verify_plugin_compatibility.py (Line 27:9 - Line 54:30), tests/plugins/test_plugin_compatibility.py (Line 65:9 - Line 92:22)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn137" onclick="toggleCodeBlock('cloneGroup137', 'expandBtn137', 'collapseBtn137')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn137" onclick="toggleCodeBlock('cloneGroup137', 'expandBtn137', 'collapseBtn137')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup137"><code class="language-python text-sm text-gray-800">class TestTool(Tool):
            @property
            def name(self) -&gt; str:
                return &quot;test_tool&quot;

            @property
            def version(self) -&gt; str:
                return &quot;1.0.0&quot;

            @property
            def dependencies(self) -&gt; List[str]:
                return [&quot;core&gt;=1.0.0&quot;]

            def __init__(self):
                self.initialized = False

            def initialize(self, container):
                self.initialized = True

            def shutdown(self):
                pass

            def get_capabilities(self):
                return {&quot;test&quot;: True}

        test_tool = TestTool()

        # Test compatibility checking</code></pre></div><div class="py-4"><p class="text-gray-600">tests/test_utils.py (Line 246:2 - Line 272:7), tests/utils/validation.py (Line 247:2 - Line 271:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn138" onclick="toggleCodeBlock('cloneGroup138', 'expandBtn138', 'collapseBtn138')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn138" onclick="toggleCodeBlock('cloneGroup138', 'expandBtn138', 'collapseBtn138')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup138"><code class="language-python text-sm text-gray-800">{
        &quot;type&quot;: &quot;dict&quot;,
        &quot;required&quot;: [&quot;status&quot;, &quot;data&quot;, &quot;timestamp&quot;],
        &quot;properties&quot;: {
            &quot;status&quot;: {&quot;type&quot;: &quot;str&quot;, &quot;pattern&quot;: &quot;^(success|error|warning)$&quot;},
            &quot;data&quot;: {
                &quot;type&quot;: &quot;dict&quot;,
                &quot;required&quot;: [&quot;users&quot;],
                &quot;properties&quot;: {
                    &quot;users&quot;: {
                        &quot;type&quot;: &quot;list&quot;,
                        &quot;items&quot;: {
                            &quot;type&quot;: &quot;dict&quot;,
                            &quot;required&quot;: [&quot;id&quot;, &quot;name&quot;],
                            &quot;properties&quot;: {
                                &quot;id&quot;: {&quot;type&quot;: &quot;int&quot;, &quot;min&quot;: 1},
                                &quot;name&quot;: {&quot;type&quot;: &quot;str&quot;}
                            }
                        }
                    }
                }
            },
            &quot;timestamp&quot;: {&quot;type&quot;: &quot;str&quot;, &quot;pattern&quot;: &quot;^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$&quot;}
        }
    }

    assert</code></pre></div><div class="py-4"><p class="text-gray-600">tests/test_utils.py (Line 279:2 - Line 289:19), tests/utils/validation.py (Line 369:2 - Line 424:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn139" onclick="toggleCodeBlock('cloneGroup139', 'expandBtn139', 'collapseBtn139')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn139" onclick="toggleCodeBlock('cloneGroup139', 'expandBtn139', 'collapseBtn139')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup139"><code class="language-python text-sm text-gray-800">{
        &quot;users&quot;: {
            &quot;columns&quot;: {
                &quot;id&quot;: {&quot;type&quot;: &quot;INTEGER&quot;, &quot;constraints&quot;: [&quot;PRIMARY KEY&quot;]},
                &quot;name&quot;: {&quot;type&quot;: &quot;TEXT&quot;, &quot;constraints&quot;: [&quot;NOT NULL&quot;]},
                &quot;email&quot;: {&quot;type&quot;: &quot;TEXT&quot;, &quot;constraints&quot;: [&quot;UNIQUE&quot;]}
            }
        }
    }

    expected_db_schema</code></pre></div><div class="py-4"><p class="text-gray-600">tests/test_utils.py (Line 289:2 - Line 299:7), tests/test_utils.py (Line 279:2 - Line 424:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn140" onclick="toggleCodeBlock('cloneGroup140', 'expandBtn140', 'collapseBtn140')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn140" onclick="toggleCodeBlock('cloneGroup140', 'expandBtn140', 'collapseBtn140')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup140"><code class="language-python text-sm text-gray-800">= {
        &quot;users&quot;: {
            &quot;columns&quot;: {
                &quot;id&quot;: {&quot;type&quot;: &quot;INTEGER&quot;, &quot;constraints&quot;: [&quot;PRIMARY KEY&quot;]},
                &quot;name&quot;: {&quot;type&quot;: &quot;TEXT&quot;, &quot;constraints&quot;: [&quot;NOT NULL&quot;]},
                &quot;email&quot;: {&quot;type&quot;: &quot;TEXT&quot;, &quot;constraints&quot;: [&quot;UNIQUE&quot;]}
            }
        }
    }

    assert</code></pre></div><div class="py-4"><p class="text-gray-600">tests/test_utils.py (Line 306:2 - Line 322:19), tests/utils/validation.py (Line 486:2 - Line 500:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn141" onclick="toggleCodeBlock('cloneGroup141', 'expandBtn141', 'collapseBtn141')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn141" onclick="toggleCodeBlock('cloneGroup141', 'expandBtn141', 'collapseBtn141')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup141"><code class="language-python text-sm text-gray-800">{
        &quot;name&quot;: &quot;test_tool&quot;,
        &quot;version&quot;: &quot;1.0.0&quot;,
        &quot;author&quot;: &quot;Test Author&quot;,
        &quot;description&quot;: &quot;Test tool&quot;,
        &quot;metadata&quot;: {
            &quot;category&quot;: &quot;utility&quot;,
            &quot;compatibility&quot;: [&quot;1.0&quot;, &quot;2.0&quot;]
        },
        &quot;functions&quot;: {
            &quot;initialize&quot;: lambda: True,
            &quot;execute&quot;: lambda x: x * 2,
            &quot;cleanup&quot;: lambda: None
        }
    }

    expected_structure</code></pre></div><div class="py-4"><p class="text-gray-600">tests/test_utils.py (Line 322:2 - Line 339:7), tests/utils/validation.py (Line 501:2 - Line 516:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn142" onclick="toggleCodeBlock('cloneGroup142', 'expandBtn142', 'collapseBtn142')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn142" onclick="toggleCodeBlock('cloneGroup142', 'expandBtn142', 'collapseBtn142')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup142"><code class="language-python text-sm text-gray-800">{
        &quot;required_fields&quot;: [&quot;name&quot;, &quot;version&quot;, &quot;author&quot;, &quot;description&quot;],
        &quot;metadata&quot;: {
            &quot;type&quot;: &quot;dict&quot;,
            &quot;required&quot;: [&quot;category&quot;, &quot;compatibility&quot;],
            &quot;properties&quot;: {
                &quot;category&quot;: {&quot;type&quot;: &quot;str&quot;},
                &quot;compatibility&quot;: {&quot;type&quot;: &quot;list&quot;, &quot;items&quot;: {&quot;type&quot;: &quot;str&quot;}}
            }
        },
        &quot;functions&quot;: {
            &quot;initialize&quot;: {&quot;parameters&quot;: []},
            &quot;execute&quot;: {&quot;parameters&quot;: [&quot;x&quot;]},
            &quot;cleanup&quot;: {&quot;parameters&quot;: []}
        }
    }

    assert</code></pre></div><div class="py-4"><p class="text-gray-600">tests/test_utils.py (Line 346:2 - Line 363:11), tests/utils/validation.py (Line 567:2 - Line 582:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn143" onclick="toggleCodeBlock('cloneGroup143', 'expandBtn143', 'collapseBtn143')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn143" onclick="toggleCodeBlock('cloneGroup143', 'expandBtn143', 'collapseBtn143')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup143"><code class="language-python text-sm text-gray-800">{
        &quot;status&quot;: &quot;success&quot;,
        &quot;code&quot;: 200,
        &quot;data&quot;: {
            &quot;items&quot;: [
                {&quot;id&quot;: 1, &quot;name&quot;: &quot;Item 1&quot;},
                {&quot;id&quot;: 2, &quot;name&quot;: &quot;Item 2&quot;}
            ],
            &quot;pagination&quot;: {
                &quot;page&quot;: 1,
                &quot;page_size&quot;: 10,
                &quot;total&quot;: 2
            }
        },
        &quot;timestamp&quot;: &quot;2023-01-01T00:00:00Z&quot;
    }

    api_schema</code></pre></div><div class="py-4"><p class="text-gray-600">tests/test_utils.py (Line 363:2 - Line 399:7), tests/utils/validation.py (Line 583:2 - Line 617:2)</p><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2" id="expandBtn144" onclick="toggleCodeBlock('cloneGroup144', 'expandBtn144', 'collapseBtn144')">Show code</button><button class="bg-gray-500 text-white px-1 py-0.5 text-xs rounded focus:outline-none ml-2 hidden" id="collapseBtn144" onclick="toggleCodeBlock('cloneGroup144', 'expandBtn144', 'collapseBtn144')">Hide code</button><pre class="bg-gray-100 border border-gray-200 p-4 rounded mt-2 hidden" id="cloneGroup144"><code class="language-python text-sm text-gray-800">{
        &quot;type&quot;: &quot;dict&quot;,
        &quot;required&quot;: [&quot;status&quot;, &quot;code&quot;, &quot;data&quot;, &quot;timestamp&quot;],
        &quot;properties&quot;: {
            &quot;status&quot;: {&quot;type&quot;: &quot;str&quot;, &quot;pattern&quot;: &quot;^(success|error|warning)$&quot;},
            &quot;code&quot;: {&quot;type&quot;: &quot;int&quot;, &quot;min&quot;: 200, &quot;max&quot;: 599},
            &quot;data&quot;: {
                &quot;type&quot;: &quot;dict&quot;,
                &quot;required&quot;: [&quot;items&quot;, &quot;pagination&quot;],
                &quot;properties&quot;: {
                    &quot;items&quot;: {
                        &quot;type&quot;: &quot;list&quot;,
                        &quot;items&quot;: {
                            &quot;type&quot;: &quot;dict&quot;,
                            &quot;required&quot;: [&quot;id&quot;, &quot;name&quot;],
                            &quot;properties&quot;: {
                                &quot;id&quot;: {&quot;type&quot;: &quot;int&quot;, &quot;min&quot;: 1},
                                &quot;name&quot;: {&quot;type&quot;: &quot;str&quot;}
                            }
                        }
                    },
                    &quot;pagination&quot;: {
                        &quot;type&quot;: &quot;dict&quot;,
                        &quot;required&quot;: [&quot;page&quot;, &quot;page_size&quot;, &quot;total&quot;],
                        &quot;properties&quot;: {
                            &quot;page&quot;: {&quot;type&quot;: &quot;int&quot;, &quot;min&quot;: 1},
                            &quot;page_size&quot;: {&quot;type&quot;: &quot;int&quot;, &quot;min&quot;: 1, &quot;max&quot;: 100},
                            &quot;total&quot;: {&quot;type&quot;: &quot;int&quot;, &quot;min&quot;: 0}
                        }
                    }
                }
            },
            &quot;timestamp&quot;: {&quot;type&quot;: &quot;str&quot;, &quot;pattern&quot;: &quot;^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$&quot;}
        }
    }

    assert</code></pre></div><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="ini-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">ini</h2><div class="divide-y divide-gray-200 border-b-2"><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div><a name="markdown-clones"></a><h2 class="text-2xl font-semibold text-gray-700 mb-4">markdown</h2><div class="divide-y divide-gray-200 border-b-2"><!-- Add more clone groups for .txt format as needed         // Add more clone groups for .txt format as needed--></div></section><!-- Add more sections for other formats and clone groups as needed--></main><footer class="bg-white shadow mt-8 py-4"><div class="container mx-auto px-4 text-center"><p class="text-sm text-gray-600">This report is generated by jscpd, an open-source copy/paste detector.</p><p class="text-sm text-gray-600">jscpd is licensed under the MIT License.</p><a class="text-blue-500 text-sm" href="https://github.com/kucherenko/jscpd" target="_blank" rel="noopener noreferrer">View jscpd on GitHub</a></div></footer><script src="js/prism.js"></script><script>function toggleCodeBlock(codeBlockId, expandBtnId, collapseBtnId) {
  const codeBlock = document.getElementById(codeBlockId);
  const expandBtn = document.getElementById(expandBtnId);
  const collapseBtn = document.getElementById(collapseBtnId);

  codeBlock.classList.toggle('hidden');
  expandBtn.classList.toggle('hidden');
  collapseBtn.classList.toggle('hidden');
}</script></body></html>
